var ripple=function(t){function e(r){if(i[r])return i[r].exports;var s=i[r]={exports:{},id:r,loaded:!1};return t[r].call(null,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.e=function(t,i){i.call(null,e)},e.modules=t,e.cache=i,e(0)}({c:"",0:function(t,e,i){e.Remote=i(29).Remote,e.Amount=i(2).Amount,e.Currency=i(11).Currency,e.UInt160=i(2).UInt160,e.Seed=i(2).Seed,e.Transaction=i(19).Transaction,e.Meta=i(16).Meta,e.utils=i(3),e.sjcl=i(1),e.config=i(6)},1:function(t,e,i){(function(t,e){"use strict";var i={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}};e!==void 0&&e.exports&&(e.exports=i),i.cipher.aes=function(t){this._tables[0][0][0]||this._precompute();var e,r,s,n,o,a=this._tables[0][4],c=this._tables[1],u=t.length,h=1;if(4!==u&&6!==u&&8!==u)throw new i.exception.invalid("invalid aes key size");for(this._key=[n=t.slice(0),o=[]],e=u;4*u+28>e;e++)s=n[e-1],(0===e%u||8===u&&4===e%u)&&(s=a[s>>>24]<<24^a[255&s>>16]<<16^a[255&s>>8]<<8^a[255&s],0===e%u&&(s=s<<8^s>>>24^h<<24,h=h<<1^283*(h>>7))),n[e]=n[e-u]^s;for(r=0;e;r++,e--)s=n[3&r?e:e-4],o[r]=4>=e||4>r?s:c[0][a[s>>>24]]^c[1][a[255&s>>16]]^c[2][a[255&s>>8]]^c[3][a[255&s]]},i.cipher.aes.prototype={encrypt:function(t){return this._crypt(t,0)},decrypt:function(t){return this._crypt(t,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var t,e,i,r,s,n,o,a,c,u=this._tables[0],h=this._tables[1],f=u[4],_=h[4],l=[],p=[];for(t=0;256>t;t++)p[(l[t]=t<<1^283*(t>>7))^t]=t;for(e=i=0;!f[e];e^=r||1,i=p[i]||1)for(o=i^i<<1^i<<2^i<<3^i<<4,o=99^(o>>8^255&o),f[e]=o,_[o]=e,n=l[s=l[r=l[e]]],c=16843009*n^65537*s^257*r^16843008*e,a=257*l[o]^16843008*o,t=0;4>t;t++)u[t][e]=a=a<<24^a>>>8,h[t][o]=c=c<<24^c>>>8;for(t=0;5>t;t++)u[t]=u[t].slice(0),h[t]=h[t].slice(0)},_crypt:function(t,e){if(4!==t.length)throw new i.exception.invalid("invalid aes block size");var r,s,n,o,a=this._key[e],c=t[0]^a[0],u=t[e?3:1]^a[1],h=t[2]^a[2],f=t[e?1:3]^a[3],_=a.length/4-2,l=4,p=[0,0,0,0],d=this._tables[e],m=d[0],v=d[1],y=d[2],g=d[3],b=d[4];for(o=0;_>o;o++)r=m[c>>>24]^v[255&u>>16]^y[255&h>>8]^g[255&f]^a[l],s=m[u>>>24]^v[255&h>>16]^y[255&f>>8]^g[255&c]^a[l+1],n=m[h>>>24]^v[255&f>>16]^y[255&c>>8]^g[255&u]^a[l+2],f=m[f>>>24]^v[255&c>>16]^y[255&u>>8]^g[255&h]^a[l+3],l+=4,c=r,u=s,h=n;for(o=0;4>o;o++)p[e?3&-o:o]=b[c>>>24]<<24^b[255&u>>16]<<16^b[255&h>>8]<<8^b[255&f]^a[l++],r=c,c=u,u=h,h=f,f=r;return p}},i.bitArray={bitSlice:function(t,e,r){return t=i.bitArray._shiftRight(t.slice(e/32),32-(31&e)).slice(1),void 0===r?t:i.bitArray.clamp(t,r-e)},extract:function(t,e,i){var r,s=Math.floor(31&-e-i);return r=-32&(e+i-1^e)?t[0|e/32]<<32-s^t[0|e/32+1]>>>s:t[0|e/32]>>>s,r&(1<<i)-1},concat:function(t,e){if(0===t.length||0===e.length)return t.concat(e);var r=t[t.length-1],s=i.bitArray.getPartial(r);return 32===s?t.concat(e):i.bitArray._shiftRight(e,s,0|r,t.slice(0,t.length-1))},bitLength:function(t){var e,r=t.length;return 0===r?0:(e=t[r-1],32*(r-1)+i.bitArray.getPartial(e))},clamp:function(t,e){if(e>32*t.length)return t;t=t.slice(0,Math.ceil(e/32));var r=t.length;return e=31&e,r>0&&e&&(t[r-1]=i.bitArray.partial(e,t[r-1]&2147483648>>e-1,1)),t},partial:function(t,e,i){return 32===t?e:(i?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(i.bitArray.bitLength(t)!==i.bitArray.bitLength(e))return!1;var r,s=0;for(r=0;t.length>r;r++)s|=t[r]^e[r];return 0===s},_shiftRight:function(t,e,r,s){var n,o,a=0;for(void 0===s&&(s=[]);e>=32;e-=32)s.push(r),r=0;if(0===e)return s.concat(t);for(n=0;t.length>n;n++)s.push(r|t[n]>>>e),r=t[n]<<32-e;return a=t.length?t[t.length-1]:0,o=i.bitArray.getPartial(a),s.push(i.bitArray.partial(31&e+o,e+o>32?r:s.pop(),1)),s},_xor4:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]}},i.codec.utf8String={fromBits:function(t){var e,r,s="",n=i.bitArray.bitLength(t);for(e=0;n/8>e;e++)0===(3&e)&&(r=t[e/4]),s+=String.fromCharCode(r>>>24),r<<=8;return decodeURIComponent(escape(s))},toBits:function(t){t=unescape(encodeURIComponent(t));var e,r=[],s=0;for(e=0;t.length>e;e++)s=s<<8|t.charCodeAt(e),3===(3&e)&&(r.push(s),s=0);return 3&e&&r.push(i.bitArray.partial(8*(3&e),s)),r}},i.codec.hex={fromBits:function(t){var e,r="";for(e=0;t.length>e;e++)r+=((0|t[e])+0xf00000000000).toString(16).substr(4);return r.substr(0,i.bitArray.bitLength(t)/4)},toBits:function(t){var e,r,s=[];for(t=t.replace(/\s|0x/g,""),r=t.length,t+="00000000",e=0;t.length>e;e+=8)s.push(0^parseInt(t.substr(e,8),16));return i.bitArray.clamp(s,4*r)}},i.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e,r){var s,n="",o=0,a=i.codec.base64._chars,c=0,u=i.bitArray.bitLength(t);for(r&&(a=a.substr(0,62)+"-_"),s=0;u>6*n.length;)n+=a.charAt((c^t[s]>>>o)>>>26),6>o?(c=t[s]<<6-o,o+=26,s++):(c<<=6,o-=6);for(;3&n.length&&!e;)n+="=";return n},toBits:function(t,e){t=t.replace(/\s|=/g,"");var r,s,n=[],o=0,a=i.codec.base64._chars,c=0;for(e&&(a=a.substr(0,62)+"-_"),r=0;t.length>r;r++){if(s=a.indexOf(t.charAt(r)),0>s)throw new i.exception.invalid("this isn't base64!");o>26?(o-=26,n.push(c^s>>>o),c=s<<32-o):(o+=6,c^=s<<32-o)}return 56&o&&n.push(i.bitArray.partial(56&o,c,1)),n}},i.codec.base64url={fromBits:function(t){return i.codec.base64.fromBits(t,1,1)},toBits:function(t){return i.codec.base64.toBits(t,1)}},i.codec.bytes={fromBits:function(t){var e,r,s=[],n=i.bitArray.bitLength(t);for(e=0;n/8>e;e++)0===(3&e)&&(r=t[e/4]),s.push(r>>>24),r<<=8;return s},toBits:function(t){var e,r=[],s=0;for(e=0;t.length>e;e++)s=s<<8|t[e],3===(3&e)&&(r.push(s),s=0);return 3&e&&r.push(i.bitArray.partial(8*(3&e),s)),r}},i.hash.sha256=function(t){this._key[0]||this._precompute(),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},i.hash.sha256.hash=function(t){return(new i.hash.sha256).update(t).finalize()},i.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=i.codec.utf8String.toBits(t));var e,r=this._buffer=i.bitArray.concat(this._buffer,t),s=this._length,n=this._length=s+i.bitArray.bitLength(t);for(e=-512&512+s;n>=e;e+=512)this._block(r.splice(0,16));return this},finalize:function(){var t,e=this._buffer,r=this._h;for(e=i.bitArray.concat(e,[i.bitArray.partial(1,1)]),t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,16));return this.reset(),r},_init:[],_key:[],_precompute:function(){function t(t){return 0|4294967296*(t-Math.floor(t))}var e,i=0,r=2;t:for(;64>i;r++){for(e=2;r>=e*e;e++)if(0===r%e)continue t;8>i&&(this._init[i]=t(Math.pow(r,.5))),this._key[i]=t(Math.pow(r,1/3)),i++}},_block:function(t){var e,i,r,s,n=t.slice(0),o=this._h,a=this._key,c=o[0],u=o[1],h=o[2],f=o[3],_=o[4],l=o[5],p=o[6],d=o[7];for(e=0;64>e;e++)16>e?i=n[e]:(r=n[15&e+1],s=n[15&e+14],i=n[15&e]=0|(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(s>>>17^s>>>19^s>>>10^s<<15^s<<13)+n[15&e]+n[15&e+9]),i=i+d+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(p^_&(l^p))+a[e],d=p,p=l,l=_,_=0|f+i,f=h,h=u,u=c,c=0|i+(u&h^f&(u^h))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10);o[0]=0|o[0]+c,o[1]=0|o[1]+u,o[2]=0|o[2]+h,o[3]=0|o[3]+f,o[4]=0|o[4]+_,o[5]=0|o[5]+l,o[6]=0|o[6]+p,o[7]=0|o[7]+d}},i.hash.sha512=function(t){this._key[0]||this._precompute(),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},i.hash.sha512.hash=function(t){return(new i.hash.sha512).update(t).finalize()},i.hash.sha512.prototype={blockSize:1024,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=i.codec.utf8String.toBits(t));var e,r=this._buffer=i.bitArray.concat(this._buffer,t),s=this._length,n=this._length=s+i.bitArray.bitLength(t);for(e=-1024&1024+s;n>=e;e+=1024)this._block(r.splice(0,32));return this},finalize:function(){var t,e=this._buffer,r=this._h;for(e=i.bitArray.concat(e,[i.bitArray.partial(1,1)]),t=e.length+4;31&t;t++)e.push(0);for(e.push(0),e.push(0),e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,32));return this.reset(),r},_init:[],_initr:[12372232,13281083,9762859,1914609,15106769,4090911,4308331,8266105],_key:[],_keyr:[2666018,15689165,5061423,9034684,4764984,380953,1658779,7176472,197186,7368638,14987916,16757986,8096111,1480369,13046325,6891156,15813330,5187043,9229749,11312229,2818677,10937475,4324308,1135541,6741931,11809296,16458047,15666916,11046850,698149,229999,945776,13774844,2541862,12856045,9810911,11494366,7844520,15576806,8533307,15795044,4337665,16291729,5553712,15684120,6662416,7413802,12308920,13816008,4303699,9366425,10176680,13195875,4295371,6546291,11712675,15708924,1519456,15772530,6568428,6495784,8568297,13007125,7492395,2515356,12632583,14740254,7262584,1535930,13146278,16321966,1853211,294276,13051027,13221564,1051980,4080310,6651434,14088940,4675607],_precompute:function(){function t(t){return 0|4294967296*(t-Math.floor(t))}function e(t){return 255&1099511627776*(t-Math.floor(t))}var i,r=0,s=2;t:for(;80>r;s++){for(i=2;s>=i*i;i++)if(0===s%i)continue t;8>r&&(this._init[2*r]=t(Math.pow(s,.5)),this._init[2*r+1]=e(Math.pow(s,.5))<<24|this._initr[r]),this._key[2*r]=t(Math.pow(s,1/3)),this._key[2*r+1]=e(Math.pow(s,1/3))<<24|this._keyr[r],r++}},_block:function(t){var e,i,r,s=t.slice(0),n=this._h,o=this._key,a=n[0],c=n[1],u=n[2],h=n[3],f=n[4],_=n[5],l=n[6],p=n[7],d=n[8],m=n[9],v=n[10],y=n[11],g=n[12],b=n[13],w=n[14],x=n[15],E=a,T=c,A=u,j=h,S=f,B=_,R=l,q=p,D=d,k=m,O=v,M=y,C=g,I=b,z=w,P=x;for(e=0;80>e;e++){if(16>e)i=s[2*e],r=s[2*e+1];else{var L=s[2*(e-15)],F=s[2*(e-15)+1],N=(F<<31|L>>>1)^(F<<24|L>>>8)^L>>>7,U=(L<<31|F>>>1)^(L<<24|F>>>8)^(L<<25|F>>>7),V=s[2*(e-2)],G=s[2*(e-2)+1],H=(G<<13|V>>>19)^(V<<3|G>>>29)^V>>>6,X=(V<<13|G>>>19)^(G<<3|V>>>29)^(V<<26|G>>>6),Z=s[2*(e-7)],K=s[2*(e-7)+1],J=s[2*(e-16)],Y=s[2*(e-16)+1];r=U+K,i=N+Z+(U>>>0>r>>>0?1:0),r+=X,i+=H+(X>>>0>r>>>0?1:0),r+=Y,i+=J+(Y>>>0>r>>>0?1:0)}s[2*e]=i|=0,s[2*e+1]=r|=0;var Q=D&O^~D&C,W=k&M^~k&I,$=E&A^E&S^A&S,te=T&j^T&B^j&B,ee=(T<<4|E>>>28)^(E<<30|T>>>2)^(E<<25|T>>>7),ie=(E<<4|T>>>28)^(T<<30|E>>>2)^(T<<25|E>>>7),re=(k<<18|D>>>14)^(k<<14|D>>>18)^(D<<23|k>>>9),se=(D<<18|k>>>14)^(D<<14|k>>>18)^(k<<23|D>>>9),ne=o[2*e],oe=o[2*e+1],ae=P+se,ce=z+re+(P>>>0>ae>>>0?1:0);ae+=W,ce+=Q+(W>>>0>ae>>>0?1:0),ae+=oe,ce+=ne+(oe>>>0>ae>>>0?1:0),ae+=r,ce+=i+(r>>>0>ae>>>0?1:0);var ue=ie+te,he=ee+$+(ie>>>0>ue>>>0?1:0);z=C,P=I,C=O,I=M,O=D,M=k,k=0|q+ae,D=0|R+ce+(q>>>0>k>>>0?1:0),R=S,q=B,S=A,B=j,A=E,j=T,T=0|ae+ue,E=0|ce+he+(ae>>>0>T>>>0?1:0)}c=n[1]=0|c+T,n[0]=0|a+E+(T>>>0>c>>>0?1:0),h=n[3]=0|h+j,n[2]=0|u+A+(j>>>0>h>>>0?1:0),_=n[5]=0|_+B,n[4]=0|f+S+(B>>>0>_>>>0?1:0),p=n[7]=0|p+q,n[6]=0|l+R+(q>>>0>p>>>0?1:0),m=n[9]=0|m+k,n[8]=0|d+D+(k>>>0>m>>>0?1:0),y=n[11]=0|y+M,n[10]=0|v+O+(M>>>0>y>>>0?1:0),b=n[13]=0|b+I,n[12]=0|g+C+(I>>>0>b>>>0?1:0),x=n[15]=0|x+P,n[14]=0|w+z+(P>>>0>x>>>0?1:0)}},i.hash.sha1=function(t){t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},i.hash.sha1.hash=function(t){return(new i.hash.sha1).update(t).finalize()},i.hash.sha1.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=i.codec.utf8String.toBits(t));var e,r=this._buffer=i.bitArray.concat(this._buffer,t),s=this._length,n=this._length=s+i.bitArray.bitLength(t);for(e=this.blockSize+s&-this.blockSize;n>=e;e+=this.blockSize)this._block(r.splice(0,16));return this},finalize:function(){var t,e=this._buffer,r=this._h;for(e=i.bitArray.concat(e,[i.bitArray.partial(1,1)]),t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,16));return this.reset(),r},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(t,e,i,r){return 19>=t?e&i|~e&r:39>=t?e^i^r:59>=t?e&i|e&r|i&r:79>=t?e^i^r:void 0},_S:function(t,e){return e<<t|e>>>32-t},_block:function(t){var e,i,r,s,n,o,a,c=t.slice(0),u=this._h;for(this._key,r=u[0],s=u[1],n=u[2],o=u[3],a=u[4],e=0;79>=e;e++)e>=16&&(c[e]=this._S(1,c[e-3]^c[e-8]^c[e-14]^c[e-16])),i=0|this._S(5,r)+this._f(e,s,n,o)+a+c[e]+this._key[Math.floor(e/20)],a=o,o=n,n=this._S(30,s),s=r,r=i;u[0]=0|u[0]+r,u[1]=0|u[1]+s,u[2]=0|u[2]+n,u[3]=0|u[3]+o,u[4]=0|u[4]+a}},i.mode.ccm={name:"ccm",encrypt:function(t,e,r,s,n){var o,a,c=e.slice(0),u=i.bitArray,h=u.bitLength(r)/8,f=u.bitLength(c)/8;if(n=n||64,s=s||[],7>h)throw new i.exception.invalid("ccm: iv must be at least 7 bytes");for(o=2;4>o&&f>>>8*o;o++);return 15-h>o&&(o=15-h),r=u.clamp(r,8*(15-o)),a=i.mode.ccm._computeTag(t,e,r,s,n,o),c=i.mode.ccm._ctrMode(t,c,r,a,n,o),u.concat(c.data,c.tag)},decrypt:function(t,e,r,s,n){n=n||64,s=s||[];var o,a,c=i.bitArray,u=c.bitLength(r)/8,h=c.bitLength(e),f=c.clamp(e,h-n),_=c.bitSlice(e,h-n);if(h=(h-n)/8,7>u)throw new i.exception.invalid("ccm: iv must be at least 7 bytes");for(o=2;4>o&&h>>>8*o;o++);if(15-u>o&&(o=15-u),r=c.clamp(r,8*(15-o)),f=i.mode.ccm._ctrMode(t,f,r,_,n,o),a=i.mode.ccm._computeTag(t,f.data,r,s,n,o),!c.equal(f.tag,a))throw new i.exception.corrupt("ccm: tag doesn't match");return f.data},_computeTag:function(t,e,r,s,n,o){var a,c,u,h=[],f=i.bitArray,_=f._xor4;if(n/=8,n%2||4>n||n>16)throw new i.exception.invalid("ccm: invalid tag length");if(s.length>4294967295||e.length>4294967295)throw new i.exception.bug("ccm: can't deal with 4GiB or more data");if(a=[f.partial(8,(s.length?64:0)|n-2<<2|o-1)],a=f.concat(a,r),a[3]|=f.bitLength(e)/8,a=t.encrypt(a),s.length)for(c=f.bitLength(s)/8,65279>=c?h=[f.partial(16,c)]:4294967295>=c&&(h=f.concat([f.partial(16,65534)],[c])),h=f.concat(h,s),u=0;h.length>u;u+=4)a=t.encrypt(_(a,h.slice(u,u+4).concat([0,0,0])));for(u=0;e.length>u;u+=4)a=t.encrypt(_(a,e.slice(u,u+4).concat([0,0,0])));return f.clamp(a,8*n)},_ctrMode:function(t,e,r,s,n,o){var a,c,u,h=i.bitArray,f=h._xor4,_=e.length,l=h.bitLength(e);if(u=h.concat([h.partial(8,o-1)],r).concat([0,0,0]).slice(0,4),s=h.bitSlice(f(s,t.encrypt(u)),0,n),!_)return{tag:s,data:[]};for(c=0;_>c;c+=4)u[3]++,a=t.encrypt(u),e[c]^=a[0],e[c+1]^=a[1],e[c+2]^=a[2],e[c+3]^=a[3];return{tag:s,data:h.clamp(e,l)}}},i.misc.hmac=function(t,e){this._hash=e=e||i.hash.sha256;var r,s=[[],[]],n=e.prototype.blockSize/32;for(this._baseHash=[new e,new e],t.length>n&&(t=e.hash(t)),r=0;n>r;r++)s[0][r]=909522486^t[r],s[1][r]=1549556828^t[r];this._baseHash[0].update(s[0]),this._baseHash[1].update(s[1])},i.misc.hmac.prototype.encrypt=i.misc.hmac.prototype.mac=function(t){var e=new this._hash(this._baseHash[0]).update(t).finalize();return new this._hash(this._baseHash[1]).update(e).finalize()},i.misc.pbkdf2=function(t,e,r,s,n){if(r=r||1e3,0>s||0>r)throw i.exception.invalid("invalid params to pbkdf2");"string"==typeof t&&(t=i.codec.utf8String.toBits(t)),n=n||i.misc.hmac;var o,a,c,u,h,f=new n(t),_=[],l=i.bitArray;for(h=1;(s||1)>32*_.length;h++){for(o=a=f.encrypt(l.concat(e,[h])),c=1;r>c;c++)for(a=f.encrypt(a),u=0;a.length>u;u++)o[u]^=a[u];_=_.concat(o)}return s&&(_=l.clamp(_,s)),_},i.random={randomWords:function(t,e){var r,s,n=[],o=this.isReady(e);if(o===this._NOT_READY)throw new i.exception.notReady("generator isn't seeded");for(o&this._REQUIRES_RESEED&&this._reseedFromPools(!(o&this._READY)),r=0;t>r;r+=4)0===(r+1)%this._MAX_WORDS_PER_BURST&&this._gate(),s=this._gen4words(),n.push(s[0],s[1],s[2],s[3]);return this._gate(),n.slice(0,t)},setDefaultParanoia:function(t){this._defaultParanoia=t},addEntropy:function(t,e,r){r=r||"user";var s,n,o,a=(new Date).valueOf(),c=this._robins[r],u=this.isReady(),h=0;switch(s=this._collectorIds[r],void 0===s&&(s=this._collectorIds[r]=this._collectorIdNext++),void 0===c&&(c=this._robins[r]=0),this._robins[r]=(this._robins[r]+1)%this._pools.length,typeof t){case"number":void 0===e&&(e=1),this._pools[c].update([s,this._eventId++,1,e,a,1,0|t]);break;case"object":var f=Object.prototype.toString.call(t);if("[object Uint32Array]"===f){for(o=[],n=0;t.length>n;n++)o.push(t[n]);t=o}else for("[object Array]"!==f&&(h=1),n=0;t.length>n&&!h;n++)"number"!=typeof t[n]&&(h=1);if(!h){if(void 0===e)for(e=0,n=0;t.length>n;n++)for(o=t[n];o>0;)e++,o>>>=1;this._pools[c].update([s,this._eventId++,2,e,a,t.length].concat(t))}break;case"string":void 0===e&&(e=t.length),this._pools[c].update([s,this._eventId++,3,e,a,t.length]),this._pools[c].update(t);break;default:h=1}if(h)throw new i.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[c]+=e,this._poolStrength+=e,u===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(t){var e=this._PARANOIA_LEVELS[void 0!==t?t:this._defaultParanoia];return this._strength&&this._strength>=e?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=e?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(t){var e=this._PARANOIA_LEVELS[t?t:this._defaultParanoia];return this._strength>=e?1:this._poolStrength>e?1:this._poolStrength/e},startCollectors:function(){if(!this._collectorsStarted){if(window.addEventListener)window.addEventListener("load",this._loadTimeCollector,!1),window.addEventListener("mousemove",this._mouseCollector,!1);else{if(!document.attachEvent)throw new i.exception.bug("can't attach event");document.attachEvent("onload",this._loadTimeCollector),document.attachEvent("onmousemove",this._mouseCollector)}this._collectorsStarted=!0}},stopCollectors:function(){this._collectorsStarted&&(window.removeEventListener?(window.removeEventListener("load",this._loadTimeCollector,!1),window.removeEventListener("mousemove",this._mouseCollector,!1)):window.detachEvent&&(window.detachEvent("onload",this._loadTimeCollector),window.detachEvent("onmousemove",this._mouseCollector)),this._collectorsStarted=!1)},addEventListener:function(t,e){this._callbacks[t][this._callbackI++]=e},removeEventListener:function(t,e){var i,r,s=this._callbacks[t],n=[];for(r in s)s.hasOwnProperty(r)&&s[r]===e&&n.push(r);for(i=0;n.length>i;i++)r=n[i],delete s[r]},_pools:[new i.hash.sha256],_poolEntropy:[0],_reseedCount:0,_robins:{},_eventId:0,_collectorIds:{},_collectorIdNext:0,_strength:0,_poolStrength:0,_nextReseed:0,_key:[0,0,0,0,0,0,0,0],_counter:[0,0,0,0],_cipher:void 0,_defaultParanoia:6,_collectorsStarted:!1,_callbacks:{progress:{},seeded:{}},_callbackI:0,_NOT_READY:0,_READY:1,_REQUIRES_RESEED:2,_MAX_WORDS_PER_BURST:65536,_PARANOIA_LEVELS:[0,48,64,96,128,192,256,384,512,768,1024],_MILLISECONDS_PER_RESEED:3e4,_BITS_PER_RESEED:80,_gen4words:function(){for(var t=0;4>t&&(this._counter[t]=0|this._counter[t]+1,!this._counter[t]);t++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new i.cipher.aes(this._key)},_reseed:function(t){this._key=i.hash.sha256.hash(this._key.concat(t)),this._cipher=new i.cipher.aes(this._key);for(var e=0;4>e&&(this._counter[e]=0|this._counter[e]+1,!this._counter[e]);e++);},_reseedFromPools:function(t){var e,r=[],s=0;for(this._nextReseed=r[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED,e=0;16>e;e++)r.push(0|4294967296*Math.random());for(e=0;this._pools.length>e&&(r=r.concat(this._pools[e].finalize()),s+=this._poolEntropy[e],this._poolEntropy[e]=0,t||!(this._reseedCount&1<<e));e++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new i.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=s,s>this._strength&&(this._strength=s),this._reseedCount++,this._reseed(r)},_mouseCollector:function(t){var e=t.x||t.clientX||t.offsetX||0,r=t.y||t.clientY||t.offsetY||0;i.random.addEntropy([e,r],2,"mouse")},_loadTimeCollector:function(){i.random.addEntropy((new Date).valueOf(),2,"loadtime")},_fireEvent:function(t,e){var r,s=i.random._callbacks[t],n=[];for(r in s)s.hasOwnProperty(r)&&n.push(s[r]);for(r=0;n.length>r;r++)n[r](e)}},function(){try{var t=new Uint32Array(32);crypto.getRandomValues(t),i.random.addEntropy(t,1024,"crypto.getRandomValues")}catch(e){}}(),i.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},encrypt:function(t,e,r,s){r=r||{},s=s||{};var n,o,a,c=i.json,u=c._add({iv:i.random.randomWords(4,0)},c.defaults);if(c._add(u,r),a=u.adata,"string"==typeof u.salt&&(u.salt=i.codec.base64.toBits(u.salt)),"string"==typeof u.iv&&(u.iv=i.codec.base64.toBits(u.iv)),!i.mode[u.mode]||!i.cipher[u.cipher]||"string"==typeof t&&100>=u.iter||64!==u.ts&&96!==u.ts&&128!==u.ts||128!==u.ks&&192!==u.ks&&256!==u.ks||2>u.iv.length||u.iv.length>4)throw new i.exception.invalid("json encrypt: invalid parameters");return"string"==typeof t&&(n=i.misc.cachedPbkdf2(t,u),t=n.key.slice(0,u.ks/32),u.salt=n.salt),"string"==typeof e&&(e=i.codec.utf8String.toBits(e)),"string"==typeof a&&(a=i.codec.utf8String.toBits(a)),o=new i.cipher[u.cipher](t),c._add(s,u),s.key=t,u.ct=i.mode[u.mode].encrypt(o,e,u.iv,a,u.ts),c.encode(u)},decrypt:function(t,e,r,s){r=r||{},s=s||{};var n,o,a,c=i.json,u=c._add(c._add(c._add({},c.defaults),c.decode(e)),r,!0),h=u.adata;if("string"==typeof u.salt&&(u.salt=i.codec.base64.toBits(u.salt)),"string"==typeof u.iv&&(u.iv=i.codec.base64.toBits(u.iv)),!i.mode[u.mode]||!i.cipher[u.cipher]||"string"==typeof t&&100>=u.iter||64!==u.ts&&96!==u.ts&&128!==u.ts||128!==u.ks&&192!==u.ks&&256!==u.ks||!u.iv||2>u.iv.length||u.iv.length>4)throw new i.exception.invalid("json decrypt: invalid parameters");return"string"==typeof t&&(o=i.misc.cachedPbkdf2(t,u),t=o.key.slice(0,u.ks/32),u.salt=o.salt),"string"==typeof h&&(h=i.codec.utf8String.toBits(h)),a=new i.cipher[u.cipher](t),n=i.mode[u.mode].decrypt(a,u.ct,u.iv,h,u.ts),c._add(s,u),s.key=t,i.codec.utf8String.fromBits(n)},encode:function(t){var e,r="{",s="";for(e in t)if(t.hasOwnProperty(e)){if(!e.match(/^[a-z0-9]+$/i))throw new i.exception.invalid("json encode: invalid property name");switch(r+=s+'"'+e+'"'+":",s=",",typeof t[e]){case"number":case"boolean":r+=t[e];break;case"string":r+='"'+escape(t[e])+'"';break;case"object":r+='"'+i.codec.base64.fromBits(t[e],0)+'"';break;default:throw new i.exception.bug("json encode: unsupported type")}}return r+"}"},decode:function(t){if(t=t.replace(/\s/g,""),!t.match(/^\{.*\}$/))throw new i.exception.invalid("json decode: this isn't json!");var e,r,s=t.replace(/^\{|\}$/g,"").split(/,/),n={};for(e=0;s.length>e;e++){if(!(r=s[e].match(/^(?:(["']?)([a-z][a-z0-9]*)\1):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i)))throw new i.exception.invalid("json decode: this isn't json!");n[r[2]]=r[3]?parseInt(r[3],10):r[2].match(/^(ct|salt|iv)$/)?i.codec.base64.toBits(r[4]):unescape(r[4])}return n},_add:function(t,e,r){if(void 0===t&&(t={}),void 0===e)return t;var s;for(s in e)if(e.hasOwnProperty(s)){if(r&&void 0!==t[s]&&t[s]!==e[s])throw new i.exception.invalid("required parameter overridden");t[s]=e[s]}return t},_subtract:function(t,e){var i,r={};for(i in t)t.hasOwnProperty(i)&&t[i]!==e[i]&&(r[i]=t[i]);return r},_filter:function(t,e){var i,r={};for(i=0;e.length>i;i++)void 0!==t[e[i]]&&(r[e[i]]=t[e[i]]);return r}},i.encrypt=i.json.encrypt,i.decrypt=i.json.decrypt,i.misc._pbkdf2Cache={},i.misc.cachedPbkdf2=function(t,e){var r,s,n,o,a=i.misc._pbkdf2Cache;return e=e||{},o=e.iter||1e3,s=a[t]=a[t]||{},r=s[o]=s[o]||{firstSalt:e.salt&&e.salt.length?e.salt.slice(0):i.random.randomWords(2,0)},n=void 0===e.salt?r.firstSalt:e.salt,r[n]=r[n]||i.misc.pbkdf2(t,n,e.iter),{key:r[n].slice(0),salt:n.slice(0)}},i.bn=function(t){this.initWith(t)},i.bn.prototype={radix:24,maxMul:8,_class:i.bn,copy:function(){return new this._class(this)},initWith:function(t){var e,i=0;switch(typeof t){case"object":this.limbs=t.limbs.slice(0);break;case"number":this.limbs=[t],this.normalize();break;case"string":for(t=t.replace(/^0x/,""),this.limbs=[],e=this.radix/4,i=0;t.length>i;i+=e)this.limbs.push(parseInt(t.substring(Math.max(t.length-i-e,0),t.length-i),16));break;default:this.limbs=[0]}return this},equals:function(t){"number"==typeof t&&(t=new this._class(t));var e,i=0;for(this.fullReduce(),t.fullReduce(),e=0;this.limbs.length>e||t.limbs.length>e;e++)i|=this.getLimb(e)^t.getLimb(e);return 0===i},getLimb:function(t){return t>=this.limbs.length?0:this.limbs[t]},greaterEquals:function(t){"number"==typeof t&&(t=new this._class(t));var e,i,r,s=0,n=0;for(e=Math.max(this.limbs.length,t.limbs.length)-1;e>=0;e--)i=this.getLimb(e),r=t.getLimb(e),n|=r-i&~s,s|=i-r&~n;return(n|~s)>>>31},toString:function(){this.fullReduce();var t,e,i="",r=this.limbs;for(t=0;this.limbs.length>t;t++){for(e=r[t].toString(16);this.limbs.length-1>t&&6>e.length;)e="0"+e;i=e+i}return"0x"+i},addM:function(t){"object"!=typeof t&&(t=new this._class(t));var e,i=this.limbs,r=t.limbs;for(e=i.length;r.length>e;e++)i[e]=0;for(e=0;r.length>e;e++)i[e]+=r[e];return this},doubleM:function(){var t,e,i=0,r=this.radix,s=this.radixMask,n=this.limbs;for(t=0;n.length>t;t++)e=n[t],e=e+e+i,n[t]=e&s,i=e>>r;return i&&n.push(i),this},halveM:function(){var t,e,i=0,r=this.radix,s=this.limbs;for(t=s.length-1;t>=0;t--)e=s[t],s[t]=e+i>>1,i=(1&e)<<r;return s[s.length-1]||s.pop(),this},subM:function(t){"object"!=typeof t&&(t=new this._class(t));var e,i=this.limbs,r=t.limbs;for(e=i.length;r.length>e;e++)i[e]=0;for(e=0;r.length>e;e++)i[e]-=r[e];return this},mod:function(t){t=new i.bn(t).normalize();for(var e=new i.bn(this).normalize(),r=0;e.greaterEquals(t);r++)t.doubleM();for(;r>0;r--)t.halveM(),e.greaterEquals(t)&&e.subM(t).normalize();return e.trim()},inverseMod:function(t){var e,r,s=new i.bn(1),n=new i.bn(0),o=new i.bn(this),a=new i.bn(t),c=1;if(!(1&t.limbs[0]))throw new i.exception.invalid("inverseMod: p must be odd");do for(1&o.limbs[0]&&(o.greaterEquals(a)||(e=o,o=a,a=e,e=s,s=n,n=e),o.subM(a),o.normalize(),s.greaterEquals(n)||s.addM(t),s.subM(n)),o.halveM(),1&s.limbs[0]&&s.addM(t),s.normalize(),s.halveM(),r=c=0;o.limbs.length>r;r++)c|=o.limbs[r];while(c);if(!a.equals(1))throw new i.exception.invalid("inverseMod: p and x must be relatively prime");return n},add:function(t){return this.copy().addM(t)},sub:function(t){return this.copy().subM(t)},mul:function(t){"number"==typeof t&&(t=new this._class(t));var e,i,r,s=this.limbs,n=t.limbs,o=s.length,a=n.length,c=new this._class,u=c.limbs,h=this.maxMul;for(e=0;this.limbs.length+t.limbs.length+1>e;e++)u[e]=0;for(e=0;o>e;e++){for(r=s[e],i=0;a>i;i++)u[e+i]+=r*n[i];--h||(h=this.maxMul,c.cnormalize())}return c.cnormalize().reduce()},square:function(){return this.mul(this)},power:function(t){"number"==typeof t?t=[t]:void 0!==t.limbs&&(t=t.normalize().limbs);var e,i,r=new this._class(1),s=this;for(e=0;t.length>e;e++)for(i=0;this.radix>i;i++)t[e]&1<<i&&(r=r.mul(s)),s=s.square();return r},mulmod:function(t,e){return this.mod(e).mul(t.mod(e)).mod(e)},powermod:function(t,e){for(var r=new i.bn(1),s=new i.bn(this),n=new i.bn(t);;){if(1&n.limbs[0]&&(r=r.mulmod(s,e)),n.halveM(),n.equals(0))break;s=s.mulmod(s,e)}return r.normalize().reduce()},trim:function(){var t,e=this.limbs;do t=e.pop();while(e.length&&0===t);return e.push(t),this},reduce:function(){return this},fullReduce:function(){return this.normalize()},normalize:function(){var t,e,i,r=0,s=(this.placeVal,this.ipv),n=this.limbs,o=n.length,a=this.radixMask;for(t=0;o>t||0!==r&&-1!==r;t++)e=(n[t]||0)+r,i=n[t]=e&a,r=(e-i)*s;return-1===r&&(n[t-1]-=this.placeVal),this},cnormalize:function(){var t,e,i,r=0,s=this.ipv,n=this.limbs,o=n.length,a=this.radixMask;for(t=0;o-1>t;t++)e=n[t]+r,i=n[t]=e&a,r=(e-i)*s;return n[t]+=r,this},toBits:function(t){this.fullReduce(),t=t||this.exponent||this.limbs.length*this.radix;var e=Math.floor((t-1)/24),r=i.bitArray,s=(-8&t+7)%this.radix||this.radix,n=[r.partial(s,this.getLimb(e))];for(e--;e>=0;e--)n=r.concat(n,[r.partial(this.radix,this.getLimb(e))]);return n},bitLength:function(){this.fullReduce();for(var t=this.radix*(this.limbs.length-1),e=this.limbs[this.limbs.length-1];e;e>>=1)t++;return-8&t+7}},i.bn.fromBits=function(t){var e=this,r=new e,s=[],n=i.bitArray,o=this.prototype,a=Math.min(this.bitLength||4294967296,n.bitLength(t)),c=a%o.radix||o.radix;for(s[0]=n.extract(t,0,c);a>c;c+=o.radix)s.unshift(n.extract(t,c,o.radix));return r.limbs=s,r},i.bn.prototype.ipv=1/(i.bn.prototype.placeVal=Math.pow(2,i.bn.prototype.radix)),i.bn.prototype.radixMask=(1<<i.bn.prototype.radix)-1,i.bn.pseudoMersennePrime=function(t,e){function r(t){this.initWith(t)}var s,n,o,a=r.prototype=new i.bn;for(o=a.modOffset=Math.ceil(n=t/a.radix),a.exponent=t,a.offset=[],a.factor=[],a.minOffset=o,a.fullMask=0,a.fullOffset=[],a.fullFactor=[],a.modulus=r.modulus=new i.bn(Math.pow(2,t)),a.fullMask=0|-Math.pow(2,t%a.radix),s=0;e.length>s;s++)a.offset[s]=Math.floor(e[s][0]/a.radix-n),a.fullOffset[s]=Math.ceil(e[s][0]/a.radix-n),a.factor[s]=e[s][1]*Math.pow(.5,t-e[s][0]+a.offset[s]*a.radix),a.fullFactor[s]=e[s][1]*Math.pow(.5,t-e[s][0]+a.fullOffset[s]*a.radix),a.modulus.addM(new i.bn(Math.pow(2,e[s][0])*e[s][1])),a.minOffset=Math.min(a.minOffset,-a.offset[s]);return a._class=r,a.modulus.cnormalize(),a.reduce=function(){var t,e,i,r,s=this.modOffset,n=this.limbs,o=this.offset,a=this.offset.length,c=this.factor;for(t=this.minOffset;n.length>s;){for(i=n.pop(),r=n.length,e=0;a>e;e++)n[r+o[e]]-=c[e]*i;t--,t||(n.push(0),this.cnormalize(),t=this.minOffset)}return this.cnormalize(),this},a._strongReduce=-1===a.fullMask?a.reduce:function(){var t,e,i=this.limbs,r=i.length-1;if(this.reduce(),r===this.modOffset-1){for(e=i[r]&this.fullMask,i[r]-=e,t=0;this.fullOffset.length>t;t++)i[r+this.fullOffset[t]]-=this.fullFactor[t]*e;this.normalize()}},a.fullReduce=function(){var t,e;for(this._strongReduce(),this.addM(this.modulus),this.addM(this.modulus),this.normalize(),this._strongReduce(),e=this.limbs.length;this.modOffset>e;e++)this.limbs[e]=0;for(t=this.greaterEquals(this.modulus),e=0;this.limbs.length>e;e++)this.limbs[e]-=this.modulus.limbs[e]*t;return this.cnormalize(),this},a.inverse=function(){return this.power(this.modulus.sub(2))},r.fromBits=i.bn.fromBits,r},i.bn.prime={p127:i.bn.pseudoMersennePrime(127,[[0,-1]]),p25519:i.bn.pseudoMersennePrime(255,[[0,-19]]),p192:i.bn.pseudoMersennePrime(192,[[0,-1],[64,-1]]),p224:i.bn.pseudoMersennePrime(224,[[0,1],[96,-1]]),p256:i.bn.pseudoMersennePrime(256,[[0,-1],[96,1],[192,1],[224,-1]]),p384:i.bn.pseudoMersennePrime(384,[[0,-1],[32,1],[96,-1],[128,-1]]),p521:i.bn.pseudoMersennePrime(521,[[0,-1]])},i.bn.random=function(t,e){"object"!=typeof t&&(t=new i.bn(t));for(var r,s,n=t.limbs.length,o=t.limbs[n-1]+1,a=new i.bn;;){do r=i.random.randomWords(n,e),0>r[n-1]&&(r[n-1]+=4294967296);while(Math.floor(r[n-1]/o)===Math.floor(4294967296/o));for(r[n-1]%=o,s=0;n-1>s;s++)r[s]&=t.radixMask;if(a.limbs=r,!a.greaterEquals(t))return a}},i.ecc={},i.ecc.point=function(t,e,i){void 0===e?this.isIdentity=!0:(this.x=e,this.y=i,this.isIdentity=!1),this.curve=t},i.ecc.point.prototype={toJac:function(){return new i.ecc.pointJac(this.curve,this.x,this.y,new this.curve.field(1))},mult:function(t){return this.toJac().mult(t,this).toAffine()},mult2:function(t,e,i){return this.toJac().mult2(t,this,e,i).toAffine()},multiples:function(){var t,e,r;if(void 0===this._multiples)for(r=this.toJac().doubl(),t=this._multiples=[new i.ecc.point(this.curve),this,r.toAffine()],e=3;16>e;e++)r=r.add(this),t.push(r.toAffine());return this._multiples},isValid:function(){return this.y.square().equals(this.curve.b.add(this.x.mul(this.curve.a.add(this.x.square()))))},toBits:function(){return i.bitArray.concat(this.x.toBits(),this.y.toBits())}},i.ecc.pointJac=function(t,e,i,r){void 0===e?this.isIdentity=!0:(this.x=e,this.y=i,this.z=r,this.isIdentity=!1),this.curve=t
},i.ecc.pointJac.prototype={add:function(t){var e,r,s,n,o,a,c,u,h,f,_,l=this;if(l.curve!==t.curve)throw"sjcl.ecc.add(): Points must be on the same curve to add them!";return l.isIdentity?t.toJac():t.isIdentity?l:(e=l.z.square(),r=t.x.mul(e).subM(l.x),r.equals(0)?l.y.equals(t.y.mul(e.mul(l.z)))?l.doubl():new i.ecc.pointJac(l.curve):(s=t.y.mul(e.mul(l.z)).subM(l.y),n=r.square(),o=s.square(),a=r.square().mul(r).addM(l.x.add(l.x).mul(n)),c=o.subM(a),u=l.x.mul(n).subM(c).mul(s),h=l.y.mul(r.square().mul(r)),f=u.subM(h),_=l.z.mul(r),new i.ecc.pointJac(this.curve,c,f,_)))},doubl:function(){if(this.isIdentity)return this;var t=this.y.square(),e=t.mul(this.x.mul(4)),r=t.square().mul(8),s=this.z.square(),n=this.x.sub(s).mul(3).mul(this.x.add(s)),o=n.square().subM(e).subM(e),a=e.sub(o).mul(n).subM(r),c=this.y.add(this.y).mul(this.z);return new i.ecc.pointJac(this.curve,o,a,c)},toAffine:function(){if(this.isIdentity||this.z.equals(0))return new i.ecc.point(this.curve);var t=this.z.inverse(),e=t.square();return new i.ecc.point(this.curve,this.x.mul(e).fullReduce(),this.y.mul(e.mul(t)).fullReduce())},mult:function(t,e){"number"==typeof t?t=[t]:void 0!==t.limbs&&(t=t.normalize().limbs);var r,s,n=new i.ecc.point(this.curve).toJac(),o=e.multiples();for(r=t.length-1;r>=0;r--)for(s=i.bn.prototype.radix-4;s>=0;s-=4)n=n.doubl().doubl().doubl().doubl().add(o[15&t[r]>>s]);return n},mult2:function(t,e,r,s){"number"==typeof t?t=[t]:void 0!==t.limbs&&(t=t.normalize().limbs),"number"==typeof r?r=[r]:void 0!==r.limbs&&(r=r.normalize().limbs);var n,o,a,c,u=new i.ecc.point(this.curve).toJac(),h=e.multiples(),f=s.multiples();for(n=Math.max(t.length,r.length)-1;n>=0;n--)for(a=0|t[n],c=0|r[n],o=i.bn.prototype.radix-4;o>=0;o-=4)u=u.doubl().doubl().doubl().doubl().add(h[15&a>>o]).add(f[15&c>>o]);return u},isValid:function(){var t=this.z.square(),e=t.square(),i=e.mul(t);return this.y.square().equals(this.curve.b.mul(i).add(this.x.mul(this.curve.a.mul(e).add(this.x.square()))))}},i.ecc.curve=function(t,e,r,s,n,o){this.field=t,this.r=t.prototype.modulus.sub(e),this.a=new t(r),this.b=new t(s),this.G=new i.ecc.point(this,new t(n),new t(o))},i.ecc.curve.prototype.fromBits=function(t){var e=i.bitArray,r=-8&this.field.prototype.exponent+7,s=new i.ecc.point(this,this.field.fromBits(e.bitSlice(t,0,r)),this.field.fromBits(e.bitSlice(t,r,2*r)));if(!s.isValid())throw new i.exception.corrupt("not on the curve!");return s},i.ecc.curves={c192:new i.ecc.curve(i.bn.prime.p192,"0x662107c8eb94364e4b2dd7ce",-3,"0x64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1","0x188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012","0x07192b95ffc8da78631011ed6b24cdd573f977a11e794811"),c224:new i.ecc.curve(i.bn.prime.p224,"0xe95c1f470fc1ec22d6baa3a3d5c4",-3,"0xb4050a850c04b3abf54132565044b0b7d7bfd8ba270b39432355ffb4","0xb70e0cbd6bb4bf7f321390b94a03c1d356c21122343280d6115c1d21","0xbd376388b5f723fb4c22dfe6cd4375a05a07476444d5819985007e34"),c256:new i.ecc.curve(i.bn.prime.p256,"0x4319055358e8617b0c46353d039cdaae",-3,"0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b","0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296","0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),c384:new i.ecc.curve(i.bn.prime.p384,"0x389cb27e0bc8d21fa7e5f24cb74f58851313e696333ad68c",-3,"0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef","0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7","0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},i.ecc._dh=function(t){i.ecc[t]={publicKey:function(t,e){this._curve=t,this._point=e instanceof Array?t.fromBits(e):e},secretKey:function(t,e){this._curve=t,this._exponent=e},generateKeys:function(e,r){if(void 0===e&&(e=256),"number"==typeof e&&(e=i.ecc.curves["c"+e],void 0===e))throw new i.exception.invalid("no such curve");var s=i.bn.random(e.r,r),n=e.G.mult(s);return{pub:new i.ecc[t].publicKey(e,n),sec:new i.ecc[t].secretKey(e,s)}}}},i.ecc._dh("elGamal"),i.ecc.elGamal.publicKey.prototype={kem:function(t){var e=i.bn.random(this._curve.r,t),r=this._curve.G.mult(e).toBits(),s=i.hash.sha256.hash(this._point.mult(e).toBits());return{key:s,tag:r}}},i.ecc.elGamal.secretKey.prototype={unkem:function(t){return i.hash.sha256.hash(this._curve.fromBits(t).mult(this._exponent).toBits())},dh:function(t){return i.hash.sha256.hash(t._point.mult(this._exponent).toBits())}},i.ecc._dh("ecdsa"),i.ecc.ecdsa.secretKey.prototype={sign:function(t,e){var r=this._curve.r,s=r.bitLength(),n=i.bn.random(r.sub(1),e).add(1),o=this._curve.G.mult(n).x.mod(r),a=i.bn.fromBits(t).add(o.mul(this._exponent)).inverseMod(r).mul(n).mod(r);return i.bitArray.concat(o.toBits(s),a.toBits(s))}},i.ecc.ecdsa.publicKey.prototype={verify:function(t,e){var r=i.bitArray,s=this._curve.r,n=s.bitLength(),o=i.bn.fromBits(r.bitSlice(e,0,n)),a=i.bn.fromBits(r.bitSlice(e,n,2*n)),c=i.bn.fromBits(t).mul(a).mod(s),u=o.mul(a).mod(s),h=this._curve.G.mult2(c,u,this._point).x;if(o.equals(0)||a.equals(0)||o.greaterEquals(s)||a.greaterEquals(s)||!h.equals(o))throw new i.exception.corrupt("signature didn't check out");return!0}},i.keyexchange.srp={makeVerifier:function(t,e,r,s){var n;return n=this.makeX(t,e,r),n=i.bn.fromBits(n),s.g.powermod(n,s.N)},makeX:function(t,e,r){var s=i.hash.sha1.hash(t+":"+e);return i.hash.sha1.hash(i.bitArray.concat(r,s))},knownGroup:function(t){return"string"!=typeof t&&(t=""+t),this._didInitKnownGroups||this._initKnownGroups(),this._knownGroups[t]},_didInitKnownGroups:!1,_initKnownGroups:function(){var t,e,r;for(t=0;this._knownGroupSizes.length>t;t++)e=""+this._knownGroupSizes[t],r=this._knownGroups[e],r.N=new i.bn(r.N),r.g=new i.bn(r.g);this._didInitKnownGroups=!0},_knownGroupSizes:[1024,1536,2048],_knownGroups:{1024:{N:"EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",g:2},1536:{N:"9DEF3CAFB939277AB1F12A8617A47BBBDBA51DF499AC4C80BEEEA9614B19CC4D5F4F5F556E27CBDE51C6A94BE4607A291558903BA0D0F84380B655BB9A22E8DCDF028A7CEC67F0D08134B1C8B97989149B609E0BE3BAB63D47548381DBC5B1FC764E3F4B53DD9DA1158BFD3E2B9C8CF56EDF019539349627DB2FD53D24B7C48665772E437D6C7F8CE442734AF7CCB7AE837C264AE3A9BEB87F8A2FE9B8B5292E5A021FFF5E91479E8CE7A28C2442C6F315180F93499A234DCF76E3FED135F9BB",g:2},2048:{N:"AC6BDB41324A9A9BF166DE5E1389582FAF72B6651987EE07FC3192943DB56050A37329CBB4A099ED8193E0757767A13DD52312AB4B03310DCD7F48A9DA04FD50E8083969EDB767B0CF6095179A163AB3661A05FBD5FAAAE82918A9962F0B93B855F97993EC975EEAA80D740ADBF4FF747359D041D5C33EA71D281E446B14773BCA97B43A23FB801676BD207A436C6481F1D2B9078717461A5B9D32E688F87748544523B524B0D57D5EA77A2775D2ECFA032CFBDBF52FB3786160279004E57AE6AF874E7303CE53299CCC041C7BC308D82A5698F3A8D0C38271AE35F8E9DBFBB694B5C803D89F7AE435DE236D525F54759B65E372FCD68EF20FA7111F9E4AFF73",g:2}}},i.ecc.curves.c256=new i.ecc.curve(i.bn.pseudoMersennePrime(256,[[0,-1],[4,-1],[6,-1],[7,-1],[8,-1],[9,-1],[32,-1]]),"0x14551231950b75fc4402da1722fc9baee",0,7,"0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),i.ecc.pointJac.prototype.add=function(t){var e=this;if(e.curve!==t.curve)throw"sjcl.ecc.add(): Points must be on the same curve to add them!";if(e.isIdentity)return t.toJac();if(t.isIdentity)return e;var r=e.z.square(),s=t.x.mul(r).subM(e.x),n=t.y.mul(e.z).mul(r);if(s.equals(0))return e.y.equals(t.y.mul(r.mul(e.z)))?e.doubl():new i.ecc.pointJac(e.curve);var o=s.square(),a=o.copy().doubleM().doubleM(),c=s.mul(a),u=n.sub(e.y).doubleM(),h=e.x.mul(a),f=u.square().subM(c).subM(h.copy().doubleM()),_=u.mul(h.sub(f)).subM(e.y.mul(c).doubleM()),l=e.z.add(s).square().subM(r).subM(o);return new i.ecc.pointJac(this.curve,f,_,l)},i.ecc.pointJac.prototype.doubl=function(){if(this.isIdentity)return this;var t=this.x.square(),e=this.y.square(),r=e.square(),s=this.x.add(e).square().subM(t).subM(r).doubleM(),n=t.mul(3),o=n.square(),a=o.sub(s.copy().doubleM()),c=n.mul(s.sub(a)).subM(r.doubleM().doubleM().doubleM()),u=this.y.mul(this.z).doubleM();return new i.ecc.pointJac(this.curve,a,c,u)},i.ecc.point.prototype.toBytesCompressed=function(){var t="0x0"==""+this.y.mod(2)?2:3;return[t].concat(i.codec.bytes.fromBits(this.x.toBits()))},function(){function t(t,e,i){return t^e^i}function e(t,e,i){return t&e|~t&i}function r(t,e,i){return(t|~e)^i}function s(t,e,i){return t&i|e&~i}function n(t,e,i){return t^(e|~i)}function o(t,e){return t<<e|t>>>32-e}function a(t){return(255&t)<<24|(65280&t)<<8|(t&255<<16)>>>8|(t&255<<24)>>>24}function c(i){for(var a,c=this._h[0],u=this._h[1],_=this._h[2],l=this._h[3],y=this._h[4],g=this._h[0],b=this._h[1],w=this._h[2],x=this._h[3],E=this._h[4],T=0;16>T;++T)a=o(c+t(u,_,l)+i[p[T]]+h[T],m[T])+y,c=y,y=l,l=o(_,10),_=u,u=a,a=o(g+n(b,w,x)+i[d[T]]+f[T],v[T])+E,g=E,E=x,x=o(w,10),w=b,b=a;for(;32>T;++T)a=o(c+e(u,_,l)+i[p[T]]+h[T],m[T])+y,c=y,y=l,l=o(_,10),_=u,u=a,a=o(g+s(b,w,x)+i[d[T]]+f[T],v[T])+E,g=E,E=x,x=o(w,10),w=b,b=a;for(;48>T;++T)a=o(c+r(u,_,l)+i[p[T]]+h[T],m[T])+y,c=y,y=l,l=o(_,10),_=u,u=a,a=o(g+r(b,w,x)+i[d[T]]+f[T],v[T])+E,g=E,E=x,x=o(w,10),w=b,b=a;for(;64>T;++T)a=o(c+s(u,_,l)+i[p[T]]+h[T],m[T])+y,c=y,y=l,l=o(_,10),_=u,u=a,a=o(g+e(b,w,x)+i[d[T]]+f[T],v[T])+E,g=E,E=x,x=o(w,10),w=b,b=a;for(;80>T;++T)a=o(c+n(u,_,l)+i[p[T]]+h[T],m[T])+y,c=y,y=l,l=o(_,10),_=u,u=a,a=o(g+t(b,w,x)+i[d[T]]+f[T],v[T])+E,g=E,E=x,x=o(w,10),w=b,b=a;a=this._h[1]+_+x,this._h[1]=this._h[2]+l+E,this._h[2]=this._h[3]+y+g,this._h[3]=this._h[4]+c+b,this._h[4]=this._h[0]+u+w,this._h[0]=a}i.hash.ripemd160=function(t){t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},i.hash.ripemd160.hash=function(t){return(new i.hash.ripemd160).update(t).finalize()},i.hash.ripemd160.prototype={reset:function(){return this._h=u.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=i.codec.utf8String.toBits(t));var e,r=this._buffer=i.bitArray.concat(this._buffer,t),s=this._length,n=this._length=s+i.bitArray.bitLength(t);for(e=-512&512+s;n>=e;e+=512){for(var o=r.splice(0,16),u=0;16>u;++u)o[u]=a(o[u]);c.call(this,o)}return this},finalize:function(){var t=i.bitArray.concat(this._buffer,[i.bitArray.partial(1,1)]),e=(this._length+1)%512,r=(e>448?512:448)-e%448,s=r%32;for(s>0&&(t=i.bitArray.concat(t,[i.bitArray.partial(s,0)]));r>=32;r-=32)t.push(0);for(t.push(a(0|this._length)),t.push(a(Math.floor(this._length/4294967296)));t.length;){for(var n=t.splice(0,16),o=0;16>o;++o)n[o]=a(n[o]);c.call(this,n)}var u=this._h;this.reset();for(var o=0;5>o;++o)u[o]=a(u[o]);return u}};for(var u=[1732584193,4023233417,2562383102,271733878,3285377520],h=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0],_=4;_>=0;--_)for(var l=1;16>l;++l)h.splice(_,0,h[_]),f.splice(_,0,f[_]);var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]}(),i.bn.ZERO=new i.bn(0),i.bn.prototype.divRem=function(t){"object"!=typeof t&&(t=new this._class(t));var e=this.abs(),i=t.abs(),r=new this._class(0),s=0;if(!e.greaterEquals(i))return this.initWith(0),this;if(e.equals(i))return this.initWith(1),this;for(;e.greaterEquals(i);s++)i.doubleM();for(;s>0;s--)r.doubleM(),i.halveM(),e.greaterEquals(i)&&(r.addM(1),e.subM(t).normalize());return[r,e]},i.bn.prototype.divRound=function(t){var e=this.divRem(t),i=e[0],r=e[1];return r.doubleM().greaterEquals(t)&&i.addM(1),i},i.bn.prototype.div=function(t){var e=this.divRem(t);return e[0]},i.bn.prototype.sign=function(){return this.greaterEquals(i.bn.ZERO)?1:-1},i.bn.prototype.neg=function(){return i.bn.ZERO.sub(this)},i.bn.prototype.abs=function(){return-1===this.sign()?this.neg():this},i.ecc.ecdsa.secretKey.prototype={sign:function(t,e){var r=this._curve.r,s=r.bitLength(),n=i.bn.random(r.sub(1),e).add(1),o=this._curve.G.mult(n).x.mod(r),a=i.bn.fromBits(t).add(o.mul(this._exponent)).mul(n.inverseMod(r)).mod(r);return i.bitArray.concat(o.toBits(s),a.toBits(s))}},i.ecc.ecdsa.publicKey.prototype={verify:function(t,e){var r=i.bitArray,s=this._curve.r,n=s.bitLength(),o=i.bn.fromBits(r.bitSlice(e,0,n)),a=i.bn.fromBits(r.bitSlice(e,n,2*n)),c=a.modInverse(s),u=i.bn.fromBits(t).mul(c).mod(s),h=o.mul(c).mod(s),f=this._curve.G.mult2(u,h,this._point).x;if(o.equals(0)||a.equals(0)||o.greaterEquals(s)||a.greaterEquals(s)||!f.equals(o))throw new i.exception.corrupt("signature didn't check out");return!0}},i.ecc.ecdsa.secretKey.prototype.signDER=function(t,e){return this.encodeDER(this.sign(t,e))},i.ecc.ecdsa.secretKey.prototype.encodeDER=function(t){for(var e=i.bitArray,r=this._curve.r,s=r.bitLength(),n=i.codec.bytes.fromBits(e.bitSlice(t,0,s)),o=i.codec.bytes.fromBits(e.bitSlice(t,s,2*s));!n[0]&&n.length;)n.shift();for(;!o[0]&&o.length;)o.shift();128&n[0]&&n.unshift(0),128&o[0]&&o.unshift(0);var a=[].concat(48,4+n.length+o.length,2,n.length,n,2,o.length,o);return i.codec.bytes.toBits(a)}})(i,i(20)(t))},2:function(t,e,i){var r=i(1);r.bn;var s=i(3),n=i(7),o=n.BigInteger,a=i(9).UInt160,c=i(17).Seed,u=i(11).Currency,h=e.consts={currency_xns:0,currency_one:1,xns_precision:6,bi_5:new o("5"),bi_7:new o("7"),bi_10:new o("10"),bi_1e14:new o(1e14+""),bi_1e16:new o(1e16+""),bi_1e17:new o(1e17+""),bi_1e32:new o("100000000000000000000000000000000"),bi_man_max_value:new o("9999999999999999"),bi_man_min_value:new o("1000000000000000"),bi_xns_max:new o("9000000000000000000"),bi_xns_min:new o("-9000000000000000000"),bi_xns_unit:new o("1000000"),cMinOffset:-96,cMaxOffset:80},f=function(){this._value=new o,this._offset=0,this._is_native=!0,this._is_negative=!1,this._currency=new u,this._issuer=new a};f.text_full_rewrite=function(t){return f.from_json(t).to_text_full()},f.json_rewrite=function(t){return f.from_json(t).to_json()},f.from_number=function(t){return(new f).parse_number(t)},f.from_json=function(t){return(new f).parse_json(t)},f.from_quality=function(t,e,i){return(new f).parse_quality(t,e,i)},f.from_human=function(t){return(new f).parse_human(t)},f.is_valid=function(t){return f.from_json(t).is_valid()},f.is_valid_full=function(t){return f.from_json(t).is_valid_full()},f.NaN=function(){var t=new f;return t._value=0/0,t},f.prototype.abs=function(){return this.clone(this.is_negative())},f.prototype.add=function(t){var e;if(t=f.from_json(t),this.is_comparable(t))if(t.is_zero())e=this;else if(this.is_zero())e=t.clone(),e._is_native=this._is_native,e._currency=this._currency,e._issuer=this._issuer;else if(this._is_native){e=new f;var i=this._is_negative?this._value.negate():this._value,r=t._is_negative?t._value.negate():t._value,s=i.add(r);e._is_negative=0>s.compareTo(o.ZERO),e._value=e._is_negative?s.negate():s,e._currency=this._currency,e._issuer=this._issuer}else{for(var i=this._is_negative?this._value.negate():this._value,n=this._offset,r=t._is_negative?t._value.negate():t._value,a=t._offset;a>n;)i=i.divide(h.bi_10),n+=1;for(;n>a;)r=r.divide(h.bi_10),a+=1;e=new f,e._is_native=!1,e._offset=n,e._value=i.add(r),e._is_negative=0>e._value.compareTo(o.ZERO),e._is_negative&&(e._value=e._value.negate()),e._currency=this._currency,e._issuer=this._issuer,e.canonicalize()}else e=f.NaN();return e},f.prototype.canonicalize=function(){if(this._value instanceof o)if(this._is_native)if(this._value.equals(o.ZERO))this._offset=0,this._is_negative=!1;else{for(;0>this._offset;)this._value=this._value.divide(h.bi_10),this._offset+=1;for(;this._offset>0;)this._value=this._value.multiply(h.bi_10),this._offset-=1}else if(this.is_zero())this._offset=-100,this._is_negative=!1;else{for(;0>this._value.compareTo(h.bi_man_min_value);)this._value=this._value.multiply(h.bi_10),this._offset-=1;for(;this._value.compareTo(h.bi_man_max_value)>0;)this._value=this._value.divide(h.bi_10),this._offset+=1}else;return this},f.prototype.clone=function(t){return this.copyTo(new f,t)},f.prototype.compareTo=function(t){var e;return this.is_comparable(t)?this._is_negative!==t._is_negative?e=this._is_negative?-1:1:this._value.equals(o.ZERO)?e=t._value.equals(o.ZERO)?0:-1:t._value.equals(o.ZERO)?e=1:!this._is_native&&this._offset>t._offset?e=this._is_negative?-1:1:!this._is_native&&this._offset<t._offset?e=this._is_negative?1:-1:(e=this._value.compareTo(t._value),e>0?e=this._is_negative?-1:1:0>e&&(e=this._is_negative?1:-1)):e=f.NaN(),e},f.prototype.copyTo=function(t,e){return"object"==typeof this._value?this._value.copyTo(t._value):t._value=this._value,t._offset=this._offset,t._is_native=this._is_native,t._is_negative=e?!this._is_negative:this._is_negative,t._currency=this._currency,t._issuer=this._issuer,t.is_zero()&&(t._is_negative=!1),t},f.prototype.currency=function(){return this._currency},f.prototype.equals=function(t,e){if("string"==typeof t)return this.equals(f.from_json(t));if(this===t)return!0;if(t instanceof f){if(!this.is_valid()||!t.is_valid())return!1;if(this._is_native!==t._is_native)return!1;if(!this._value.equals(t._value)||this._offset!==t._offset)return!1;if(this._is_negative!==t._is_negative)return!1;if(!this._is_native){if(!this._currency.equals(t._currency))return!1;if(!e&&!this._issuer.equals(t._issuer))return!1}return!0}return!1},f.prototype.divide=function(t){var e;if(t.is_zero())throw"divide by zero";if(this.is_zero())e=this;else{if(!this.is_valid())throw Error("Invalid dividend");if(!t.is_valid())throw Error("Invalid divisor");var i=this;if(i.is_native())for(i=i.clone();0>i._value.compareTo(h.bi_man_min_value);)i._value=i._value.multiply(h.bi_10),i._offset-=1;var r=t;if(r.is_native())for(r=r.clone();0>r._value.compareTo(h.bi_man_min_value);)r._value=r._value.multiply(h.bi_10),r._offset-=1;e=new f,e._offset=i._offset-r._offset-17,e._value=i._value.multiply(h.bi_1e17).divide(r._value).add(h.bi_5),e._is_native=i._is_native,e._is_negative=i._is_negative!==r._is_negative,e._currency=i._currency,e._issuer=i._issuer,e.canonicalize()}return e},f.prototype.ratio_human=function(t){t="number"==typeof t&&parseInt(t)===t?f.from_json(""+t+".0"):f.from_json(t);var e=this;return t=f.from_json(t),e.is_valid()&&t.is_valid()?(t._is_native&&(e=e.clone(),e._value=e._value.multiply(h.bi_xns_unit),e.canonicalize()),e.divide(t)):f.NaN()},f.prototype.product_human=function(t){if(t="number"==typeof t&&parseInt(t)===t?f.from_json(""+t+".0"):f.from_json(t),!this.is_valid()||!t.is_valid())return f.NaN();var e=this.multiply(t);return t._is_native&&(e._value=e._value.divide(h.bi_xns_unit),e.canonicalize()),e},f.prototype.is_comparable=function(t){return this._value instanceof o&&t._value instanceof o&&this._is_native===t._is_native},f.prototype.is_native=function(){return this._is_native},f.prototype.is_negative=function(){return this._value instanceof o?this._is_negative:!1},f.prototype.is_positive=function(){return!this.is_zero()&&!this.is_negative()},f.prototype.is_valid=function(){return this._value instanceof o},f.prototype.is_valid_full=function(){return this.is_valid()&&this._currency.is_valid()&&this._issuer.is_valid()},f.prototype.is_zero=function(){return this._value instanceof o?this._value.equals(o.ZERO):!1},f.prototype.issuer=function(){return this._issuer},f.prototype.multiply=function(t){var e;if(this.is_zero())e=this;else if(t.is_zero())e=this.clone(),e._value=o.ZERO;else{var i=this._value,r=this._offset,s=t._value,n=t._offset;if(this.is_native())for(;0>i.compareTo(h.bi_man_min_value);)i=i.multiply(h.bi_10),r-=1;if(t.is_native())for(;0>s.compareTo(h.bi_man_min_value);)s=s.multiply(h.bi_10),n-=1;e=new f,e._offset=r+n+14,e._value=i.multiply(s).divide(h.bi_1e14).add(h.bi_7),e._is_native=this._is_native,e._is_negative=this._is_negative!==t._is_negative,e._currency=this._currency,e._issuer=this._issuer,e.canonicalize()}return e},f.prototype.negate=function(){return this.clone("NEGATE")},f.prototype.parse_human=function(t){t=""+t;var e=t.match(/^\s*([a-z]{3})?\s*(-)?(\d+)(?:\.(\d*))?\s*([a-z]{3})?\s*$/i);if(e){var i=e[1]||e[5]||"XRP",r=e[3]||"0",s=e[4]||"",n=null;if(i=i.toUpperCase(),this._value=new o(r),this.set_currency(i),"XRP"===i){for(s=s.slice(0,6);6>s.length;)s+="0";this._is_native=!0,this._value=this._value.multiply(h.bi_xns_unit).add(new o(s))}else{for(;"0"===s[s.length-1];)s=s.slice(0,s.length-1);n=s.length,this._is_native=!1;var a=h.bi_10.clone().pow(n);this._value=this._value.multiply(a).add(new o(s)),this._offset=-n,this.canonicalize()}this._is_negative=!!e[2]}else this._value=0/0;return this},f.prototype.parse_issuer=function(t){return this._issuer=a.from_json(t),this},f.prototype.parse_quality=function(t,e,i){return this._is_negative=!1,this._value=new o(t.substring(t.length-14),16),this._offset=parseInt(t.substring(t.length-16,t.length-14),16)-100,this._currency=u.from_json(e),this._issuer=a.from_json(i),this._is_native=this._currency.is_native(),this.canonicalize(),this},f.prototype.parse_number=function(t){return this._is_native=!1,this._currency=u.from_json(1),this._issuer=a.from_json(1),this._is_negative=0>t?1:0,this._value=new o((this._is_negative?-t:t)+""),this._offset=0,this.canonicalize(),this},f.prototype.parse_json=function(t){if("string"==typeof t){var e=t.match(/^([^/]+)\/(...)(?:\/(.+))?$/);e?(this._currency=u.from_json(e[2]),this._issuer=e[3]?a.from_json(e[3]):a.from_json("1"),this.parse_value(e[1])):(this.parse_native(t),this._currency=u.from_json("0"),this._issuer=a.from_json("0"))}else"number"==typeof t?this.parse_json(""+t):"object"==typeof t&&t instanceof f?t.copyTo(this):"object"==typeof t&&"value"in t?(this._currency.parse_json(t.currency),"string"==typeof t.issuer&&this._issuer.parse_json(t.issuer),this.parse_value(t.value)):this._value=0/0;return this},f.prototype.parse_native=function(t){var e;if("string"==typeof t&&(e=t.match(/^(-?)(\d*)(\.\d{0,6})?$/)),e){if(void 0===e[3])this._value=new o(e[2]);else{var i=new o(e[2]).multiply(h.bi_xns_unit),r=new o(e[3]).multiply(new o(Math.pow(10,1+h.xns_precision-e[3].length)+""));this._value=i.add(r)}this._is_native=!0,this._offset=0,this._is_negative=!!e[1]&&0!==this._value.compareTo(o.ZERO),this._value.compareTo(h.bi_xns_max)>0&&(this._value=0/0)}else this._value=0/0;return this},f.prototype.parse_value=function(t){if(this._is_native=!1,"number"==typeof t)this._is_negative=0>t,this._value=new o(this._is_negative?-t:t),this._offset=0,this.canonicalize();else if("string"==typeof t){var e=t.match(/^(-?)(\d+)$/),i=!e&&t.match(/^(-?)(\d*)\.(\d*)$/),r=!r&&t.match(/^(-?)(\d*)e(-?\d+)$/);if(r)this._value=new o(r[2]),this._offset=parseInt(r[3]),this._is_negative=!!r[1],this.canonicalize();else if(i){var s=new o(i[2]),n=new o(i[3]),a=i[3].length;this._value=s.multiply(h.bi_10.clone().pow(a)).add(n),this._offset=-a,this._is_negative=!!i[1],this.canonicalize()}else e?(this._value=new o(e[2]),this._offset=0,this._is_negative=!!e[1],this.canonicalize()):this._value=0/0}else this._value=t instanceof o?t:0/0;return this},f.prototype.set_currency=function(t){return this._currency="string"==typeof t?u.from_json(t):t,this._is_native=this._currency.is_native(),this},f.prototype.set_issuer=function(t){return this._issuer=t instanceof a?t:a.from_json(t),this},f.prototype.subtract=function(t){return this.add(f.from_json(t).negate())},f.prototype.to_number=function(t){var e=this.to_text(t);return"string"==typeof e?Number(e):e},f.prototype.to_text=function(t){if(this._value instanceof o){if(this._is_native)return this._value.compareTo(h.bi_xns_max)>0?t?0/0:"0":(this._is_negative?"-":"")+(""+this._value);if(this.is_zero())return"0";if(this._offset&&(-25>this._offset||this._offset>-4))return(this._is_negative?"-":"")+(""+this._value)+"e"+this._offset;var e="000000000000000000000000000"+(""+this._value)+"00000000000000000000000",i=e.substring(0,this._offset+43),r=e.substring(this._offset+43),s=i.match(/[1-9].*$/),n=r.match(/[1-9]0*$/);return(this._is_negative?"-":"")+(s?s[0]:"0")+(n?"."+r.substring(0,1+r.length-n[0].length):"")}return t?0/0:"0"},f.prototype.to_human=function(t){if(t=t||{},!this.is_valid())return"";t.signed===void 0&&(t.signed=!0),t.group_sep===void 0&&(t.group_sep=!0),t.group_width=t.group_width||3;for(var e=this._is_native?h.xns_precision:-this._offset,i=h.bi_10.clone().pow(e),r=this._value.divide(i).toString(10),n=this._value.mod(i).toString(10);e>n.length;)n="0"+n;if(r=r.replace(/^0*/,""),n=n.replace(/0*$/,""),(n.length||!t.skip_empty_fraction)&&("number"==typeof t.precision&&(n=n.slice(0,t.precision)),"number"==typeof t.min_precision))for(;n.length<t.min_precision;)n+="0";t.group_sep&&("string"!=typeof t.group_sep&&(t.group_sep=","),r=s.chunkString(r,t.group_width,!0).join(t.group_sep));var o="";return t.signed&&this._is_negative&&("string"!=typeof t.signed&&(t.signed="-"),o+=t.signed),o+=r.length?r:"0",o+=n.length?"."+n:""},f.prototype.to_human_full=function(t){t=t||{};var e,i=this.to_human(t),r=this._currency.to_human(),s=this._issuer.to_json(t);return e=this._is_native?i+"/"+r:i+"/"+r+"/"+s},f.prototype.to_json=function(){if(this._is_native)return this.to_text();var t={value:this.to_text(),currency:this._currency.to_json()};return this._issuer.is_valid()&&(t.issuer=this._issuer.to_json()),t},f.prototype.to_text_full=function(t){return this._value instanceof o?this._is_native?this.to_human()+"/XRP":this.to_text()+"/"+this._currency.to_json()+"/"+this._issuer.to_json(t):0/0},f.prototype.not_equals_why=function(t,e){if("string"==typeof t)return this.not_equals_why(f.from_json(t));if(this===t)return!1;if(t instanceof f){if(!this.is_valid()||!t.is_valid())return"Invalid amount.";if(this._is_native!==t._is_native)return"Native mismatch.";var i=this._is_native?"XRP":"Non-XRP";if(!this._value.equals(t._value)||this._offset!==t._offset)return i+" value differs.";if(this._is_negative!==t._is_negative)return i+" sign differs.";if(!this._is_native){if(!this._currency.equals(t._currency))return"Non-XRP currency differs.";if(!e&&!this._issuer.equals(t._issuer))return"Non-XRP issuer differs: "+t._issuer.to_json()+"/"+this._issuer.to_json()}return!1}return"Wrong constructor."},e.Amount=f,e.Currency=u,e.Seed=c,e.UInt160=a},3:function(t,e,i){var e=t.exports=i(32);e.logObject=function(t,e){/MSIE/.test(navigator.userAgent)?console.log(t,JSON.stringify(e)):console.log(t,"",e)}},4:function(t){function e(t){if(!t||"[object Object]"!==toString.call(t)||t.nodeType||t.setInterval)return!1;var e=hasOwnProperty.call(t,"constructor"),r=hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!r)return!1;var s;for(s in t);return void 0===s||i.call(t,s)}var i=Object.prototype.hasOwnProperty;t.exports=function r(){var t,i,s,n,o,a,c=arguments[0]||{},u=1,h=arguments.length,f=!1;for("boolean"==typeof c&&(f=c,c=arguments[1]||{},u=2),"object"!=typeof c&&"function"!=typeof c&&(c={});h>u;u++)if(null!=(t=arguments[u]))for(i in t)s=c[i],n=t[i],c!==n&&(f&&n&&(e(n)||(o=Array.isArray(n)))?(o?(o=!1,a=s&&Array.isArray(s)?s:[]):a=s&&e(s)?s:{},c[i]=r(f,a,n)):void 0!==n&&(c[i]=n));return c}},5:function(t,e,i){var r=e.EventEmitter=function r(){},s=i(14);i(21);var n=10;r.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._maxListeners=t},r.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||s(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var i=Array.prototype.slice.call(arguments,1);e.apply(this,i)}return!0}if(s(e)){for(var i=Array.prototype.slice.call(arguments,1),r=e.slice(),n=0,o=r.length;o>n;n++)r[n].apply(this,i);return!0}return!1},r.prototype.addListener=function(t,e){if("function"!=typeof e)throw Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned){var i;i=void 0!==this._maxListeners?this._maxListeners:n,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(events) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function i(){r.removeListener(t,i),e.apply(this,arguments)}if("function"!=typeof e)throw Error(".once only takes instances of Function");var r=this;return i.listener=e,r.on(t,i),this},r.prototype.removeListener=function(t,e){if("function"!=typeof e)throw Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var i=this._events[t];if(s(i)){for(var r=-1,n=0,o=i.length;o>n;n++)if(i[n]===e||i[n].listener&&i[n].listener===e){r=n;break}if(0>r)return this;i.splice(r,1),0==i.length&&delete this._events[t]}else(i===e||i.listener&&i.listener===e)&&delete this._events[t];return this},r.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},r.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),s(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}},6:function(t,e,i){var r=i(4),s=t.exports={load:function(t){return r(s,t),s}}},7:function(t,e){function i(t,e,i,r,s,n){for(;--n>=0;){var o=e*this[t++]+i[r]+s;s=Math.floor(o/67108864),i[r++]=67108863&o}return s}function r(t,e,i,r,s,n){for(var o=32767&e,a=e>>15;--n>=0;){var c=32767&this[t],u=this[t++]>>15,h=a*c+u*o;c=o*c+((32767&h)<<15)+i[r]+(1073741823&s),s=(c>>>30)+(h>>>15)+a*u+(s>>>30),i[r++]=1073741823&c}return s}function s(t,e,i,r,s,n){for(var o=16383&e,a=e>>14;--n>=0;){var c=16383&this[t],u=this[t++]>>14,h=a*c+u*o;c=o*c+((16383&h)<<14)+i[r]+s,s=(c>>28)+(h>>14)+a*u,i[r++]=268435455&c}return s}function n(t){return oi.charAt(t)}function o(t,e){var i=ai[t.charCodeAt(e)];return null==i?-1:i}function a(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function c(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+DV:this.t=0}function u(t){var e=ii();return e.fromInt(t),e}function h(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return this.fromRadix(t,e),void 0;i=2}this.t=0,this.s=0;for(var r=t.length,s=!1,n=0;--r>=0;){var a=8==i?255&t[r]:o(t,r);0>a?"-"==t.charAt(r)&&(s=!0):(s=!1,0==n?this[this.t++]=a:n+i>this.DB?(this[this.t-1]|=(a&(1<<this.DB-n)-1)<<n,this[this.t++]=a>>this.DB-n):this[this.t-1]|=a<<n,n+=i,n>=this.DB&&(n-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,n>0&&(this[this.t-1]|=(1<<this.DB-n)-1<<n)),this.clamp(),s&&ei.ZERO.subTo(this,this)}function f(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function _(t){if(0>this.s)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,r=(1<<e)-1,s=!1,o="",a=this.t,c=this.DB-a*this.DB%e;if(a-->0)for(this.DB>c&&(i=this[a]>>c)>0&&(s=!0,o=n(i));a>=0;)e>c?(i=(this[a]&(1<<c)-1)<<e-c,i|=this[--a]>>(c+=this.DB-e)):(i=this[a]>>(c-=e)&r,0>=c&&(c+=this.DB,--a)),i>0&&(s=!0),s&&(o+=n(i));
return s?o:"0"}function l(){var t=ii();return ei.ZERO.subTo(this,t),t}function p(){return 0>this.s?this.negate():this}function d(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(e=i-t.t,0!=e)return 0>this.s?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0}function m(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function v(){return 0>=this.t?0:this.DB*(this.t-1)+m(this[this.t-1]^this.s&this.DM)}function y(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function g(t,e){for(var i=t;this.t>i;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function b(t,e){var i,r=t%this.DB,s=this.DB-r,n=(1<<s)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM;for(i=this.t-1;i>=0;--i)e[i+o+1]=this[i]>>s|a,a=(this[i]&n)<<r;for(i=o-1;i>=0;--i)e[i]=0;e[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}function w(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)return e.t=0,void 0;var r=t%this.DB,s=this.DB-r,n=(1<<r)-1;e[0]=this[i]>>r;for(var o=i+1;this.t>o;++o)e[o-i-1]|=(this[o]&n)<<s,e[o-i]=this[o]>>r;r>0&&(e[this.t-i-1]|=(this.s&n)<<s),e.t=this.t-i,e.clamp()}function x(t,e){for(var i=0,r=0,s=Math.min(t.t,this.t);s>i;)r+=this[i]-t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;this.t>i;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;t.t>i;)r-=t[i],e[i++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=0>r?-1:0,-1>r?e[i++]=this.DV+r:r>0&&(e[i++]=r),e.t=i,e.clamp()}function E(t,e){var i=this.abs(),r=t.abs(),s=i.t;for(e.t=s+r.t;--s>=0;)e[s]=0;for(s=0;r.t>s;++s)e[s+i.t]=i.am(0,r[s],e,s,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&ei.ZERO.subTo(e,e)}function T(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;e.t-1>i;++i){var r=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,r,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function A(t,e,i){var r=t.abs();if(!(0>=r.t)){var s=this.abs();if(s.t<r.t)return null!=e&&e.fromInt(0),null!=i&&this.copyTo(i),void 0;null==i&&(i=ii());var n=ii(),o=this.s,a=t.s,c=this.DB-m(r[r.t-1]);c>0?(r.lShiftTo(c,n),s.lShiftTo(c,i)):(r.copyTo(n),s.copyTo(i));var u=n.t,h=n[u-1];if(0!=h){var f=h*(1<<this.F1)+(u>1?n[u-2]>>this.F2:0),_=this.FV/f,l=(1<<this.F1)/f,p=1<<this.F2,d=i.t,v=d-u,y=null==e?ii():e;for(n.dlShiftTo(v,y),i.compareTo(y)>=0&&(i[i.t++]=1,i.subTo(y,i)),ei.ONE.dlShiftTo(u,y),y.subTo(n,n);u>n.t;)n[n.t++]=0;for(;--v>=0;){var g=i[--d]==h?this.DM:Math.floor(i[d]*_+(i[d-1]+p)*l);if(g>(i[d]+=n.am(0,g,i,v,0,u)))for(n.dlShiftTo(v,y),i.subTo(y,i);i[d]<--g;)i.subTo(y,i)}null!=e&&(i.drShiftTo(u,e),o!=a&&ei.ZERO.subTo(e,e)),i.t=u,i.clamp(),c>0&&i.rShiftTo(c,i),0>o&&ei.ZERO.subTo(i,i)}}}function j(t){var e=ii();return this.abs().divRemTo(t,null,e),0>this.s&&e.compareTo(ei.ZERO)>0&&t.subTo(e,e),e}function S(t){this.m=t}function B(t){return 0>t.s||t.compareTo(this.m)>=0?t.mod(this.m):t}function R(t){return t}function q(t){t.divRemTo(this.m,null,t)}function D(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function k(t,e){t.squareTo(e),this.reduce(e)}function O(){if(1>this.t)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=15&e*(2-(15&t)*e),e=255&e*(2-(255&t)*e),e=65535&e*(2-(65535&(65535&t)*e)),e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function M(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function C(t){var e=ii();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),0>t.s&&e.compareTo(ei.ZERO)>0&&this.m.subTo(e,e),e}function I(t){var e=ii();return t.copyTo(e),this.reduce(e),e}function z(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;this.m.t>e;++e){var i=32767&t[e],r=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t[i]+=this.m.am(0,r,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function P(t,e){t.squareTo(e),this.reduce(e)}function L(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function F(){return 0==(this.t>0?1&this[0]:this.s)}function N(t,e){if(t>4294967295||1>t)return ei.ONE;var i=ii(),r=ii(),s=e.convert(this),n=m(t)-1;for(s.copyTo(i);--n>=0;)if(e.sqrTo(i,r),(t&1<<n)>0)e.mulTo(r,s,i);else{var o=i;i=r,r=o}return e.revert(i)}function U(t,e){var i;return i=256>t||e.isEven()?new S(e):new M(e),this.exp(t,i)}function V(){var t=ii();return this.copyTo(t),t}function G(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function H(){return 0==this.t?this.s:this[0]<<24>>24}function X(){return 0==this.t?this.s:this[0]<<16>>16}function Z(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function K(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1}function J(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),r=u(i),s=ii(),n=ii(),o="";for(this.divRemTo(r,s,n);s.signum()>0;)o=(i+n.intValue()).toString(t).substr(1)+o,s.divRemTo(r,s,n);return n.intValue().toString(t)+o}function Y(t,e){this.fromInt(0),null==e&&(e=10);for(var i=this.chunkSize(e),r=Math.pow(e,i),s=!1,n=0,a=0,c=0;t.length>c;++c){var u=o(t,c);0>u?"-"==t.charAt(c)&&0==this.signum()&&(s=!0):(a=e*a+u,++n>=i&&(this.dMultiply(r),this.dAddOffset(a,0),n=0,a=0))}n>0&&(this.dMultiply(Math.pow(e,n)),this.dAddOffset(a,0)),s&&ei.ZERO.subTo(this,this)}function Q(t,e,i){if("number"==typeof e)if(2>t)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(ei.ONE.shiftLeft(t-1),ne,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(ei.ONE.shiftLeft(t-1),this);else{var r=[],s=7&t;r.length=(t>>3)+1,e.nextBytes(r),s>0?r[0]&=(1<<s)-1:r[0]=0,this.fromString(r,256)}}function W(){var t=this.t,e=[];e[0]=this.s;var i,r=this.DB-t*this.DB%8,s=0;if(t-->0)for(this.DB>r&&(i=this[t]>>r)!=(this.s&this.DM)>>r&&(e[s++]=i|this.s<<this.DB-r);t>=0;)8>r?(i=(this[t]&(1<<r)-1)<<8-r,i|=this[--t]>>(r+=this.DB-8)):(i=255&this[t]>>(r-=8),0>=r&&(r+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==s&&(128&this.s)!=(128&i)&&++s,(s>0||i!=this.s)&&(e[s++]=i);return e}function $(t){return 0==this.compareTo(t)}function te(t){return 0>this.compareTo(t)?this:t}function ee(t){return this.compareTo(t)>0?this:t}function ie(t,e,i){var r,s,n=Math.min(t.t,this.t);for(r=0;n>r;++r)i[r]=e(this[r],t[r]);if(t.t<this.t){for(s=t.s&this.DM,r=n;this.t>r;++r)i[r]=e(this[r],s);i.t=this.t}else{for(s=this.s&this.DM,r=n;t.t>r;++r)i[r]=e(s,t[r]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function re(t,e){return t&e}function se(t){var e=ii();return this.bitwiseTo(t,re,e),e}function ne(t,e){return t|e}function oe(t){var e=ii();return this.bitwiseTo(t,ne,e),e}function ae(t,e){return t^e}function ce(t){var e=ii();return this.bitwiseTo(t,ae,e),e}function ue(t,e){return t&~e}function he(t){var e=ii();return this.bitwiseTo(t,ue,e),e}function fe(){for(var t=ii(),e=0;this.t>e;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function _e(t){var e=ii();return 0>t?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function le(t){var e=ii();return 0>t?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function pe(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function de(){for(var t=0;this.t>t;++t)if(0!=this[t])return t*this.DB+pe(this[t]);return 0>this.s?this.t*this.DB:-1}function me(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function ve(){for(var t=0,e=this.s&this.DM,i=0;this.t>i;++i)t+=me(this[i]^e);return t}function ye(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function ge(t,e){var i=ei.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i}function be(t){return this.changeBit(t,ne)}function we(t){return this.changeBit(t,ue)}function xe(t){return this.changeBit(t,ae)}function Ee(t,e){for(var i=0,r=0,s=Math.min(t.t,this.t);s>i;)r+=this[i]+t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;this.t>i;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;t.t>i;)r+=t[i],e[i++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=0>r?-1:0,r>0?e[i++]=r:-1>r&&(e[i++]=this.DV+r),e.t=i,e.clamp()}function Te(t){var e=ii();return this.addTo(t,e),e}function Ae(t){var e=ii();return this.subTo(t,e),e}function je(t){var e=ii();return this.multiplyTo(t,e),e}function Se(){var t=ii();return this.squareTo(t),t}function Be(t){var e=ii();return this.divRemTo(t,e,null),e}function Re(t){var e=ii();return this.divRemTo(t,null,e),e}function qe(t){var e=ii(),i=ii();return this.divRemTo(t,e,i),[e,i]}function De(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function ke(t,e){if(0!=t){for(;e>=this.t;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Oe(){}function Me(t){return t}function Ce(t,e,i){t.multiplyTo(e,i)}function Ie(t,e){t.squareTo(e)}function ze(t){return this.exp(t,new Oe)}function Pe(t,e,i){var r=Math.min(this.t+t.t,e);for(i.s=0,i.t=r;r>0;)i[--r]=0;var s;for(s=i.t-this.t;s>r;++r)i[r+this.t]=this.am(0,t[r],i,r,0,this.t);for(s=Math.min(t.t,e);s>r;++r)this.am(0,t[r],i,r,0,e-r);i.clamp()}function Le(t,e,i){--e;var r=i.t=this.t+t.t-e;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(e-this.t,0);t.t>r;++r)i[this.t+r-e]=this.am(e-r,t[r],i,0,0,this.t+r-e);i.clamp(),i.drShiftTo(1,i)}function Fe(t){this.r2=ii(),this.q3=ii(),ei.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Ne(t){if(0>t.s||t.t>2*this.m.t)return t.mod(this.m);if(0>t.compareTo(this.m))return t;var e=ii();return t.copyTo(e),this.reduce(e),e}function Ue(t){return t}function Ve(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>t.compareTo(this.r2);)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Ge(t,e){t.squareTo(e),this.reduce(e)}function He(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function Xe(t,e){var i,r,s=t.bitLength(),n=u(1);if(0>=s)return n;i=18>s?1:48>s?3:144>s?4:768>s?5:6,r=8>s?new S(e):e.isEven()?new Fe(e):new M(e);var o=[],a=3,c=i-1,h=(1<<i)-1;if(o[1]=r.convert(this),i>1){var f=ii();for(r.sqrTo(o[1],f);h>=a;)o[a]=ii(),r.mulTo(f,o[a-2],o[a]),a+=2}var _,l,p=t.t-1,d=!0,v=ii();for(s=m(t[p])-1;p>=0;){for(s>=c?_=t[p]>>s-c&h:(_=(t[p]&(1<<s+1)-1)<<c-s,p>0&&(_|=t[p-1]>>this.DB+s-c)),a=i;0==(1&_);)_>>=1,--a;if(0>(s-=a)&&(s+=this.DB,--p),d)o[_].copyTo(n),d=!1;else{for(;a>1;)r.sqrTo(n,v),r.sqrTo(v,n),a-=2;a>0?r.sqrTo(n,v):(l=n,n=v,v=l),r.mulTo(v,o[_],n)}for(;p>=0&&0==(t[p]&1<<s);)r.sqrTo(n,v),l=n,n=v,v=l,0>--s&&(s=this.DB-1,--p)}return r.revert(n)}function Ze(t){var e=0>this.s?this.negate():this.clone(),i=0>t.s?t.negate():t.clone();if(0>e.compareTo(i)){var r=e;e=i,i=r}var s=e.getLowestSetBit(),n=i.getLowestSetBit();if(0>n)return e;for(n>s&&(n=s),n>0&&(e.rShiftTo(n,e),i.rShiftTo(n,i));e.signum()>0;)(s=e.getLowestSetBit())>0&&e.rShiftTo(s,e),(s=i.getLowestSetBit())>0&&i.rShiftTo(s,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return n>0&&i.lShiftTo(n,i),i}function Ke(t){if(0>=t)return 0;var e=this.DV%t,i=0>this.s?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var r=this.t-1;r>=0;--r)i=(e*i+this[r])%t;return i}function Je(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return ei.ZERO;for(var i=t.clone(),r=this.clone(),s=u(1),n=u(0),o=u(0),a=u(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),e?(s.isEven()&&n.isEven()||(s.addTo(this,s),n.subTo(t,n)),s.rShiftTo(1,s)):n.isEven()||n.subTo(t,n),n.rShiftTo(1,n);for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);i.compareTo(r)>=0?(i.subTo(r,i),e&&s.subTo(o,s),n.subTo(a,n)):(r.subTo(i,r),e&&o.subTo(s,o),a.subTo(n,a))}return 0!=r.compareTo(ei.ONE)?ei.ZERO:a.compareTo(t)>=0?a.subtract(t):0>a.signum()?(a.addTo(t,a),0>a.signum()?a.add(t):a):a}function Ye(t){var e,i=this.abs();if(1==i.t&&i[0]<=ci[ci.length-1]){for(e=0;ci.length>e;++e)if(i[0]==ci[e])return!0;return!1}if(i.isEven())return!1;for(e=1;ci.length>e;){for(var r=ci[e],s=e+1;ci.length>s&&ui>r;)r*=ci[s++];for(r=i.modInt(r);s>e;)if(0==r%ci[e++])return!1}return i.millerRabin(t)}function Qe(t){var e=this.subtract(ei.ONE),i=e.getLowestSetBit();if(0>=i)return!1;var r=e.shiftRight(i);t=t+1>>1,t>ci.length&&(t=ci.length);for(var s=ii(),n=0;t>n;++n){s.fromInt(ci[Math.floor(Math.random()*ci.length)]);var o=s.modPow(r,this);if(0!=o.compareTo(ei.ONE)&&0!=o.compareTo(e)){for(var a=1;i>a++&&0!=o.compareTo(e);)if(o=o.modPowInt(2,this),0==o.compareTo(ei.ONE))return!1;if(0!=o.compareTo(e))return!1}}return!0}var We,$e=0xdeadbeefcafe,ti=15715070==(16777215&$e),ei=function ei(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))},ii=function ii(){return new ei(null)};ti&&"undefined"!=typeof navigator&&"Microsoft Internet Explorer"==navigator.appName?(ei.prototype.am=r,We=30):ti&&"undefined"!=typeof navigator&&"Netscape"!=navigator.appName?(ei.prototype.am=i,We=26):(ei.prototype.am=s,We=28),ei.prototype.DB=We,ei.prototype.DM=(1<<We)-1,ei.prototype.DV=1<<We;var ri=52;ei.prototype.FV=Math.pow(2,ri),ei.prototype.F1=ri-We,ei.prototype.F2=2*We-ri;var si,ni,oi="0123456789abcdefghijklmnopqrstuvwxyz",ai=[];for(si="0".charCodeAt(0),ni=0;9>=ni;++ni)ai[si++]=ni;for(si="a".charCodeAt(0),ni=10;36>ni;++ni)ai[si++]=ni;for(si="A".charCodeAt(0),ni=10;36>ni;++ni)ai[si++]=ni;S.prototype.convert=B,S.prototype.revert=R,S.prototype.reduce=q,S.prototype.mulTo=D,S.prototype.sqrTo=k,M.prototype.convert=C,M.prototype.revert=I,M.prototype.reduce=z,M.prototype.mulTo=L,M.prototype.sqrTo=P,Oe.prototype.convert=Me,Oe.prototype.revert=Me,Oe.prototype.mulTo=Ce,Oe.prototype.sqrTo=Ie,Fe.prototype.convert=Ne,Fe.prototype.revert=Ue,Fe.prototype.reduce=Ve,Fe.prototype.mulTo=He,Fe.prototype.sqrTo=Ge;var ci=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ui=(1<<26)/ci[ci.length-1];ei.prototype.chunkSize=Z,ei.prototype.toRadix=J,ei.prototype.fromRadix=Y,ei.prototype.fromNumber=Q,ei.prototype.bitwiseTo=ie,ei.prototype.changeBit=ge,ei.prototype.addTo=Ee,ei.prototype.dMultiply=De,ei.prototype.dAddOffset=ke,ei.prototype.multiplyLowerTo=Pe,ei.prototype.multiplyUpperTo=Le,ei.prototype.modInt=Ke,ei.prototype.millerRabin=Qe,ei.prototype.clone=V,ei.prototype.intValue=G,ei.prototype.byteValue=H,ei.prototype.shortValue=X,ei.prototype.signum=K,ei.prototype.toByteArray=W,ei.prototype.equals=$,ei.prototype.min=te,ei.prototype.max=ee,ei.prototype.and=se,ei.prototype.or=oe,ei.prototype.xor=ce,ei.prototype.andNot=he,ei.prototype.not=fe,ei.prototype.shiftLeft=_e,ei.prototype.shiftRight=le,ei.prototype.getLowestSetBit=de,ei.prototype.bitCount=ve,ei.prototype.testBit=ye,ei.prototype.setBit=be,ei.prototype.clearBit=we,ei.prototype.flipBit=xe,ei.prototype.add=Te,ei.prototype.subtract=Ae,ei.prototype.multiply=je,ei.prototype.divide=Be,ei.prototype.remainder=Re,ei.prototype.divideAndRemainder=qe,ei.prototype.modPow=Xe,ei.prototype.modInverse=Je,ei.prototype.pow=ze,ei.prototype.gcd=Ze,ei.prototype.isProbablePrime=Ye,ei.prototype.square=Se,ei.prototype.copyTo=a,ei.prototype.fromInt=c,ei.prototype.fromString=h,ei.prototype.clamp=f,ei.prototype.dlShiftTo=y,ei.prototype.drShiftTo=g,ei.prototype.lShiftTo=b,ei.prototype.rShiftTo=w,ei.prototype.subTo=x,ei.prototype.multiplyTo=E,ei.prototype.squareTo=T,ei.prototype.divRemTo=A,ei.prototype.invDigit=O,ei.prototype.isEven=F,ei.prototype.exp=N,ei.prototype.toString=_,ei.prototype.negate=l,ei.prototype.abs=p,ei.prototype.compareTo=d,ei.prototype.bitLength=v,ei.prototype.mod=j,ei.prototype.modPowInt=U,ei.ZERO=u(0),ei.ONE=u(1),e.nbi=ii,e.BigInteger=ei},8:function(t,e,i){function r(t){if(t instanceof Date)return!0;if("object"!=typeof t)return!1;var e=Date.prototype&&o(Date.prototype),i=t.__proto__&&o(t.__proto__);return JSON.stringify(i)===JSON.stringify(e)}i(5);var s=i(14),n=i(25),o=i(24),a=i(23),c=i(22);e.isArray=s,e.isDate=r,e.isRegExp=c,e.print=function(){},e.puts=function(){},e.debug=function(){},e.inspect=function(t,i,a,u){function h(t,a){if(t&&"function"==typeof t.inspect&&t!==e&&(!t.constructor||t.constructor.prototype!==t))return t.inspect(a);switch(typeof t){case"undefined":return _("undefined","undefined");case"string":var u="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return _(u,"string");case"number":return _(""+t,"number");case"boolean":return _(""+t,"boolean")}if(null===t)return _("null","null");var l=n(t),p=i?o(t):l;if("function"==typeof t&&0===p.length){if(c(t))return _(""+t,"regexp");var d=t.name?": "+t.name:"";return _("[Function"+d+"]","special")}if(r(t)&&0===p.length)return _(t.toUTCString(),"date");var m,v,y;if(s(t)?(v="Array",y=["[","]"]):(v="Object",y=["{","}"]),"function"==typeof t){var g=t.name?": "+t.name:"";m=c(t)?" "+t:" [Function"+g+"]"}else m="";if(r(t)&&(m=" "+t.toUTCString()),0===p.length)return y[0]+m+y[1];if(0>a)return c(t)?_(""+t,"regexp"):_("[Object]","special");f.push(t);var b=p.map(function(e){var i,r;if(t.__lookupGetter__&&(t.__lookupGetter__(e)?r=t.__lookupSetter__(e)?_("[Getter/Setter]","special"):_("[Getter]","special"):t.__lookupSetter__(e)&&(r=_("[Setter]","special"))),0>l.indexOf(e)&&(i="["+e+"]"),r||(0>f.indexOf(t[e])?(r=null===a?h(t[e]):h(t[e],a-1),r.indexOf("\n")>-1&&(r=s(t)?r.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+r.split("\n").map(function(t){return"   "+t}).join("\n"))):r=_("[Circular]","special")),i===void 0){if("Array"===v&&e.match(/^\d+$/))return r;i=JSON.stringify(""+e),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=_(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=_(i,"string"))}return i+": "+r});f.pop();var w=0,x=b.reduce(function(t,e){return w++,e.indexOf("\n")>=0&&w++,t+e.length+1},0);return b=x>50?y[0]+(""===m?"":m+"\n ")+" "+b.join(",\n  ")+" "+y[1]:y[0]+m+" "+b.join(", ")+" "+y[1]}var f=[],_=function(t,e){var i={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r={special:"cyan",number:"blue","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"}[e];return r?"["+i[r][0]+"m"+t+"["+i[r][1]+"m":t};return u||(_=function(t){return t}),h(t,a===void 0?2:a)},e.log=function(){},e.pump=null,e.inherits=function(t,e){t.super_=e,t.prototype=a(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})};var u=/%[sdj%]/g;e.format=function(t){if("string"!=typeof t){for(var i=[],r=0;arguments.length>r;r++)i.push(e.inspect(arguments[r]));return i.join(" ")}for(var r=1,s=arguments,n=s.length,o=(t+"").replace(u,function(t){if("%%"===t)return"%";if(r>=n)return t;switch(t){case"%s":return s[r++]+"";case"%d":return Number(s[r++]);case"%j":return JSON.stringify(s[r++]);default:return t}}),a=s[r];n>r;a=s[++r])o+=null===a||"object"!=typeof a?" "+a:" "+e.inspect(a);return o}},9:function(t,e,i){i(1);var r=i(3),s=i(6),n=i(7),o=i(4),a=n.BigInteger;n.nbi;var c=i(12).UInt,u=i(10).Base,h=o(function(){this._value=0/0},c);h.width=20,h.prototype=o({},c.prototype),h.prototype.constructor=h,h.ACCOUNT_ZERO="rrrrrrrrrrrrrrrrrrrrrhoLvTp",h.ACCOUNT_ONE="rrrrrrrrrrrrrrrrrrrrBZbvji";var f=h.HEX_ZERO="0000000000000000000000000000000000000000",_=h.HEX_ONE="0000000000000000000000000000000000000001";h.STR_ZERO=r.hexToString(f),h.STR_ONE=r.hexToString(_),h.prototype.parse_json=function(t){return s.accounts&&t in s.accounts&&(t=s.accounts[t].account),this._value="number"==typeof t?new a(t+""):"string"!=typeof t?0/0:"r"===t[0]?u.decode_check(u.VER_ACCOUNT_ID,t):0/0,this},h.prototype.to_json=function(t){if(t=t||{},!(this._value instanceof a))return 0/0;var e=u.encode_check(u.VER_ACCOUNT_ID,this.to_bytes());return t.gateways&&e in t.gateways&&(e=t.gateways[e]),e},e.UInt160=h},10:function(t,e,i){var r=i(1),s=i(3),n=i(7),o=i(4),a=n.BigInteger,c=n.nbi,u={},h=u.alphabets={ripple:"rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz",tipple:"RPShNAF39wBUDnEGHJKLM4pQrsT7VWXYZ2bcdeCg65jkm8ofqi1tuvaxyz",bitcoin:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"};o(u,{VER_NONE:1,VER_NODE_PUBLIC:28,VER_NODE_PRIVATE:32,VER_ACCOUNT_ID:0,VER_ACCOUNT_PUBLIC:35,VER_ACCOUNT_PRIVATE:34,VER_FAMILY_GENERATOR:41,VER_FAMILY_SEED:33});var f=function(t){return r.codec.bytes.fromBits(r.hash.sha256.hash(r.codec.bytes.toBits(t)))},_=function(t){return f(f(t))};u.encode=function(t,e){for(var i=h[e||"ripple"],r=new a(i.length+""),s=c(),n=c(),o=new a(t),u=[];o.compareTo(a.ZERO)>0;)o.divRemTo(r,s,n),s.copyTo(o),u.push(i[n.intValue()]);var f;for(f=0;f!=t.length&&!t[f];f+=1)u.push(i[0]);return u.reverse().join("")},u.decode=function(t,e){var i,r=h[e||"ripple"],n=new a(r.length+""),o=c();for(i=0;i!=t.length&&t[i]===r[0];i+=1);for(;i!=t.length;i+=1){var u=r.indexOf(t[i]);if(0>u)return void 0;var f=c();f.fromInt(u),o=o.multiply(n).add(f)}for(var _=o.toByteArray().map(function(t){return t?0>t?256+t:t:0}),l=0;l!=_.length&&!_[l];)l+=1;l&&(_=_.slice(l));for(var p=0;p!==t.length&&t[p]===r[0];)p+=1;return[].concat(s.arraySet(p,0),_)},u.encode_check=function(t,e,i){var r=[].concat(t,e),s=f(f(r)).slice(0,4);return u.encode([].concat(r,s),i)},u.decode_check=function(t,e,i){var r=u.decode(e,i);if(!r||r[0]!==t||5>r.length)return 0/0;var s,n=_(r.slice(0,-4)).slice(0,4),o=r.slice(-4);for(s=0;4!=s;s+=1)if(n[s]!==o[s])return 0/0;return r[0]=0,new a(r.slice(0,-4),256)},e.Base=u},11:function(t,e){var i=function(){this._value=0/0};i.json_rewrite=function(t){return i.from_json(t).to_json()},i.from_json=function(t){return t instanceof i?t.clone():"string"==typeof t||"number"==typeof t?(new i).parse_json(t):new i},i.is_valid=function(t){return i.from_json(t).is_valid()},i.prototype.clone=function(){return this.copyTo(new i)},i.prototype.copyTo=function(t){return t._value=this._value,t},i.prototype.equals=function(t){return"string"!=typeof this._value&&isNaN(this._value)||"string"!=typeof t._value&&isNaN(t._value)?!1:this._value===t._value},i.prototype.parse_json=function(t){return this._value=""===t||"0"===t||"XRP"===t?0:"number"==typeof t?t:"string"!=typeof t||3!==t.length?0/0:t,this},i.prototype.is_native=function(){return!isNaN(this._value)&&!this._value},i.prototype.is_valid=function(){return"string"==typeof this._value||!isNaN(this._value)},i.prototype.to_json=function(){return this._value?this._value:"XRP"},i.prototype.to_human=function(){return this._value?this._value:"XRP"},e.Currency=i},12:function(t,e,i){var r=i(1),s=i(3),n=i(6),o=i(7),a=o.BigInteger,c=o.nbi,u=i(10).Base,h=function(){this._value=0/0};h.json_rewrite=function(t,e){return this.from_json(t).to_json(e)},h.from_generic=function(t){return t instanceof this?t.clone():(new this).parse_generic(t)},h.from_hex=function(t){return t instanceof this?t.clone():(new this).parse_hex(t)},h.from_json=function(t){return t instanceof this?t.clone():(new this).parse_json(t)},h.from_bits=function(t){return t instanceof this?t.clone():(new this).parse_bits(t)},h.from_bn=function(t){return t instanceof this?t.clone():(new this).parse_bn(t)},h.is_valid=function(t){return this.from_json(t).is_valid()},h.prototype.clone=function(){return this.copyTo(new this.constructor)},h.prototype.copyTo=function(t){return t._value=this._value,t},h.prototype.equals=function(t){return this._value instanceof a&&t._value instanceof a&&this._value.equals(t._value)},h.prototype.is_valid=function(){return this._value instanceof a},h.prototype.is_zero=function(){return this._value.equals(a.ZERO)},h.prototype.parse_generic=function(t){switch(n.accounts&&t in n.accounts&&(t=n.accounts[t].account),t){case void 0:case"0":case this.constructor.STR_ZERO:case this.constructor.ACCOUNT_ZERO:case this.constructor.HEX_ZERO:this._value=c();break;case"1":case this.constructor.STR_ONE:case this.constructor.ACCOUNT_ONE:case this.constructor.HEX_ONE:this._value=new a([1]);break;default:this._value="string"!=typeof t?0/0:"r"===t[0]?u.decode_check(u.VER_ACCOUNT_ID,t):this.constructor.width===t.length?new a(s.stringToArray(t),256):2*this.constructor.width===t.length?new a(t,16):0/0}return this},h.prototype.parse_hex=function(t){return this._value="string"==typeof t&&t.length===2*this.constructor.width?new a(t,16):0/0,this},h.prototype.parse_bits=function(t){if(r.bitArray.bitLength(t)!==8*this.constructor.width)this._value=0/0;else{var e=r.codec.bytes.fromBits(t);this._value=new a(e,256)}return this},h.prototype.parse_json=h.prototype.parse_hex,h.prototype.parse_bn=function(t){if(t instanceof r.bn&&t.bitLength()<=8*this.constructor.width){var e=r.codec.bytes.fromBits(t.toBits());this._value=new a(e,256)}else this._value=0/0;return this},h.prototype.to_bytes=function(){if(!(this._value instanceof a))return null;var t=this._value.toByteArray();t=t.map(function(t){return(t+256)%256});var e=this.constructor.width;for(t=t.slice(-e);e>t.length;)t.unshift(0);return t},h.prototype.to_hex=function(){if(!(this._value instanceof a))return null;var t=this.to_bytes();return r.codec.hex.fromBits(r.codec.bytes.toBits(t)).toUpperCase()},h.prototype.to_json=h.prototype.to_hex,h.prototype.to_bits=function(){if(!(this._value instanceof a))return null;var t=this.to_bytes();return r.codec.bytes.toBits(t)},h.prototype.to_bn=function(){if(!(this._value instanceof a))return null;var t=this.to_bits();return r.bn.fromBits(t)},e.UInt=h},13:function(t,e,i){i(1);var r=i(3);i(6);var s=i(7),n=i(4);s.BigInteger,s.nbi;var o=i(12).UInt;i(10).Base;var a=n(function(){this._value=0/0},o);a.width=32,a.prototype=n({},o.prototype),a.prototype.constructor=a;var c=a.HEX_ZERO="0000000000000000000000000000000000000000000000000000000000000000",u=a.HEX_ONE="0000000000000000000000000000000000000000000000000000000000000001";a.STR_ZERO=r.hexToString(c),a.STR_ONE=r.hexToString(u),e.UInt256=a},14:function(t){t.exports="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)}},15:function(t,e,i){var r=i(18),s=e.REQUIRED=0,n=e.OPTIONAL=1,o=e.DEFAULT=2;r.Int16.id=1,r.Int32.id=2,r.Int64.id=3,r.Hash128.id=4,r.Hash256.id=5,r.Amount.id=6,r.VariableLength.id=7,r.Account.id=8,r.Object.id=14,r.Array.id=15,r.Int8.id=16,r.Hash160.id=17,r.PathSet.id=18,r.Vector256.id=19;var a=[["TransactionType",s,2,r.Int16],["Flags",n,2,r.Int32],["SourceTag",n,3,r.Int32],["Account",s,1,r.Account],["Sequence",s,4,r.Int32],["Fee",s,8,r.Amount],["OperationLimit",n,29,r.Int32],["SigningPubKey",s,3,r.VariableLength],["TxnSignature",n,4,r.VariableLength]];e.tx={AccountSet:[3].concat(a,[["EmailHash",n,1,r.Hash128],["WalletLocator",n,7,r.Hash256],["WalletSize",n,12,r.Int32],["MessageKey",n,2,r.VariableLength],["Domain",n,7,r.VariableLength],["TransferRate",n,11,r.Int32]]),TrustSet:[20].concat(a,[["LimitAmount",n,3,r.Amount],["QualityIn",n,20,r.Int32],["QualityOut",n,21,r.Int32]]),OfferCreate:[7].concat(a,[["TakerPays",s,4,r.Amount],["TakerGets",s,5,r.Amount],["Expiration",n,10,r.Int32]]),OfferCancel:[8].concat(a,[["OfferSequence",s,25,r.Int32]]),SetRegularKey:[5].concat(a,[["RegularKey",s,8,r.Account]]),Payment:[0].concat(a,[["Destination",s,3,r.Account],["Amount",s,1,r.Amount],["SendMax",n,9,r.Amount],["Paths",o,1,r.PathSet],["InvoiceID",n,17,r.Hash256],["DestinationTag",n,14,r.Int32]]),Contract:[9].concat(a,[["Expiration",s,10,r.Int32],["BondAmount",s,23,r.Int32],["StampEscrow",s,22,r.Int32],["RippleEscrow",s,17,r.Amount],["CreateCode",n,11,r.VariableLength],["FundCode",n,8,r.VariableLength],["RemoveCode",n,9,r.VariableLength],["ExpireCode",n,10,r.VariableLength]]),RemoveContract:[10].concat(a,[["Target",s,7,r.Account]]),EnableFeature:[100].concat(a,[["Feature",s,19,r.Hash256]]),SetFee:[101].concat(a,[["Features",s,9,r.Array],["BaseFee",s,5,r.Int64],["ReferenceFeeUnits",s,30,r.Int32],["ReserveBase",s,31,r.Int32],["ReserveIncrement",s,32,r.Int32]])}},16:function(t,e,i){var r=i(4),s=i(3),n=i(9).UInt160,o=i(2).Amount,a=function(t){this.nodes=[];for(var e=0,i=t.AffectedNodes.length;i>e;e++){var s=t.AffectedNodes[e],n={};if(["CreatedNode","ModifiedNode","DeletedNode"].forEach(function(t){s[t]&&(n.diffType=t)}),!n.diffType)return null;s=s[n.diffType],n.entryType=s.LedgerEntryType,n.ledgerIndex=s.LedgerIndex,n.fields=r({},s.PreviousFields,s.NewFields,s.FinalFields),n.fieldsPrev=s.PreviousFields||{},n.fieldsNew=s.NewFields||{},n.fieldsFinal=s.FinalFields||{},this.nodes.push(n)}};a.prototype.each=function(t){for(var e=0,i=this.nodes.length;i>e;e++)t(this.nodes[e],e)};var c=["LowLimit","HighLimit","TakerPays","TakerGets"];a.prototype.getAffectedAccounts=function(){var t=[];return this.each(function(e){var i="CreatedNode"===e.diffType?e.fieldsNew:e.fieldsFinal;for(var r in i){var s=i[r];if("string"==typeof s&&n.is_valid(s))t.push(s);else if(-1!==c.indexOf(r)){var a=o.from_json(s),u=a.issuer();u.is_valid()&&!u.is_zero()&&t.push(u.to_json())}}}),t=s.arrayUnique(t)},a.prototype.getAffectedBooks=function(){var t=[];return this.each(function(e){if("Offer"===e.entryType){var i=o.from_json(e.fields.TakerGets),r=o.from_json(e.fields.TakerPays),s=i.currency().to_json();"XRP"!==s&&(s+="/"+i.issuer().to_json());var n=r.currency().to_json();"XRP"!==n&&(n+="/"+r.issuer().to_json());var a=s+":"+n;t.push(a)}}),t=s.arrayUnique(t)},e.Meta=a},17:function(t,e,i){function r(t,e){return[].concat(t,e>>24,255&e>>16,255&e>>8,255&e)}function s(t){return n.bitArray.bitSlice(n.hash.sha512.hash(n.codec.bytes.toBits(t)),0,256)}var n=i(1);i(3);var o=i(7),a=i(4),c=o.BigInteger,u=i(10).Base,h=i(12).UInt,f=(i(13).UInt256,i(27).KeyPair),_=a(function(){this._curve=n.ecc.curves.c256,this._value=0/0},h);_.width=16,_.prototype=a({},h.prototype),_.prototype.constructor=_,_.prototype.parse_json=function(t){return"string"==typeof t?t.length?"s"===t[0]?this._value=u.decode_check(u.VER_FAMILY_SEED,t):32===t.length?this._value=this.parse_hex(t):this.parse_passphrase(t):this._value=0/0:this._value=0/0,this},_.prototype.parse_passphrase=function(t){if("string"!=typeof t)throw Error("Passphrase must be a string");var e=n.hash.sha512.hash(n.codec.utf8String.toBits(t)),i=n.bitArray.bitSlice(e,0,128);return this.parse_bits(i),this},_.prototype.to_json=function(){if(!(this._value instanceof c))return 0/0;var t=u.encode_check(u.VER_FAMILY_SEED,this.to_bytes());return t},_.prototype.get_key=function(){if(!this.is_valid())throw Error("Cannot generate keys from invalid seed!");var t,e,i=this._curve,o=0,a=0;do t=n.bn.fromBits(s(r(this.to_bytes(),a))),a++;while(!i.r.greaterEquals(t));e=i.G.mult(t);var c;a=0;do c=n.bn.fromBits(s(r(r(e.toBytesCompressed(),o),a))),a++;while(!i.r.greaterEquals(c));return c=c.add(t).mod(i.r),f.from_bn_secret(c)},e.Seed=_},18:function(t,e,i){var r=i(4),s=i(3),n=i(1),o=i(2),a=o.UInt160,c=o.Amount,u=o.Currency,h=n.codec.hex,f=n.codec.bytes,_=function(t){r(this,t)};_.prototype.serialize_hex=function(t,e){var i=f.fromBits(h.toBits(e));this.serialize_varint(t,i.length),t.append(i)},_.prototype.serialize_varint=function(t,e){if(0>e)throw Error("Variable integers are unsigned.");192>=e?t.append([e]):(e-=193,t.append([193+(e>>>8),255&e]))};var l=e.Int8=new _({serialize:function(t,e){t.append([255&e])},parse:function(t){return t.read(1)[0]
}});e.Int16=new _({serialize:function(t,e){t.append([255&e>>>8,255&e])},parse:function(){throw Error("Parsing Int16 not implemented")}}),e.Int32=new _({serialize:function(t,e){t.append([255&e>>>24,255&e>>>16,255&e>>>8,255&e])},parse:function(){throw Error("Parsing Int32 not implemented")}}),e.Int64=new _({serialize:function(){throw Error("Serializing Int64 not implemented")},parse:function(){throw Error("Parsing Int64 not implemented")}}),e.Hash128=new _({serialize:function(){throw Error("Serializing Hash128 not implemented")},parse:function(){throw Error("Parsing Hash128 not implemented")}}),e.Hash256=new _({serialize:function(){throw Error("Serializing Hash256 not implemented")},parse:function(){throw Error("Parsing Hash256 not implemented")}}),e.Hash160=new _({serialize:function(){throw Error("Serializing Hash160 not implemented")},parse:function(){throw Error("Parsing Hash160 not implemented")}});var p=new _({serialize:function(t,e){var i=e.to_json();if("string"!=typeof i||3!==i.length)throw Error("Tried to serialize invalid/unimplemented currency type.");var r=i.toUpperCase(),n=s.arraySet(20,0);if(!/^[A-Z]{3}$/.test(r))throw Error("Invalid currency code");n[12]=255&r.charCodeAt(0),n[13]=255&r.charCodeAt(1),n[14]=255&r.charCodeAt(2),t.append(n)},parse:function(){throw Error("Parsing Currency not implemented")}});e.Amount=new _({serialize:function(t,e){var i=c.from_json(e);if(!i.is_valid())throw Error("Not a valid Amount object.");var r=s.arraySet(8,0);if(i.is_native()){var o=i._value.toString(16);if(o.length>16)throw Error("Value out of bounds");for(;16>o.length;)o="0"+o;r=f.fromBits(h.toBits(o)),r[0]&=63,i.is_negative()||(r[0]|=64)}else{var a=0,u=0;a|=1<<31,i.is_zero()||(i.is_negative()||(a|=1<<30),a|=(255&97+i._offset)<<22,a|=4194303&i._value.shiftRight(32).intValue(),u=4294967295&i._value.intValue()),r=n.codec.bytes.fromBits([a,u])}if(t.append(r),!i.is_native()){var _=i.currency();p.serialize(t,_),t.append(i.issuer().to_bytes())}},parse:function(){throw Error("Parsing Amount not implemented")}}),e.VariableLength=new _({serialize:function(t,e){if("string"!=typeof e)throw Error("Unknown datatype.");this.serialize_hex(t,e)},parse:function(){throw Error("Parsing VL not implemented")}}),e.Account=new _({serialize:function(t,e){var i=a.from_json(e);this.serialize_hex(t,i.to_hex())},parse:function(){throw Error("Parsing Account not implemented")}}),e.PathSet=new _({typeBoundary:255,typeEnd:0,typeAccount:1,typeCurrency:16,typeIssuer:32,serialize:function(t,e){for(var i=0,r=e.length;r>i;i++){i&&l.serialize(t,this.typeBoundary);for(var s=0,n=e[i].length;n>s;s++){var o=e[i][s],c=0;if(o.account&&(c|=this.typeAccount),o.currency&&(c|=this.typeCurrency),o.issuer&&(c|=this.typeIssuer),l.serialize(t,c),o.account&&t.append(a.from_json(o.account).to_bytes()),o.currency){var h=u.from_json(o.currency);p.serialize(t,h)}o.issuer&&t.append(a.from_json(o.issuer).to_bytes())}}l.serialize(t,this.typeEnd)},parse:function(){throw Error("Parsing PathSet not implemented")}}),e.Vector256=new _({serialize:function(){throw Error("Serializing Vector256 not implemented")},parse:function(){throw Error("Parsing Vector256 not implemented")}}),e.Object=new _({serialize:function(){throw Error("Serializing Object not implemented")},parse:function(){throw Error("Parsing Object not implemented")}}),e.Array=new _({serialize:function(){throw Error("Serializing Array not implemented")},parse:function(){throw Error("Parsing Array not implemented")}})},19:function(t,e,i){var r=i(5).EventEmitter,s=i(8),n=i(1),o=i(2).Amount,a=i(2).Currency,c=i(2).UInt160,u=i(17).Seed,h=i(30).SerializedObject,f=i(6),_=4,l=8,p=function(t){r.call(this);var e=this;this.callback=void 0,this.remote=t,this._secret=void 0,this._build_path=!1,this.tx_json={Flags:0},this.hash=void 0,this.submit_index=void 0,this.state=void 0,this.finalized=!1,this.on("success",function(t){t.engine_result&&(e.hash=t.tx_json.hash,e.set_state("client_proposed"),e.emit("proposed",{tx_json:t.tx_json,result:t.engine_result,result_code:t.engine_result_code,result_message:t.engine_result_message,rejected:e.isRejected(t.engine_result_code)}))}),this.on("error",function(){e.set_state("remoteError")})};s.inherits(p,r),p.fees={"default":o.from_json("10"),nickname_create:o.from_json("1000"),offer:o.from_json("10")},p.flags={AccountSet:{RequireDestTag:65536,OptionalDestTag:131072,RequireAuth:262144,OptionalAuth:524288,DisallowXRP:1048576,AllowXRP:2097152},OfferCreate:{Passive:65536,ImmediateOrCancel:131072,FillOrKill:262144,Sell:524288},Payment:{NoRippleDirect:65536,PartialPayment:131072,LimitQuality:262144}},p.formats=i(15).tx,p.HASH_SIGN=1398036480,p.HASH_SIGN_TESTNET=1937012736,p.prototype.consts={telLOCAL_ERROR:-399,temMALFORMED:-299,tefFAILURE:-199,terRETRY:-99,tesSUCCESS:0,tecCLAIMED:100},p.prototype.isTelLocal=function(t){return t>=this.consts.telLOCAL_ERROR&&this.consts.temMALFORMED>t},p.prototype.isTemMalformed=function(t){return t>=this.consts.temMALFORMED&&this.consts.tefFAILURE>t},p.prototype.isTefFailure=function(t){return t>=this.consts.tefFAILURE&&this.consts.terRETRY>t},p.prototype.isTerRetry=function(t){return t>=this.consts.terRETRY&&this.consts.tesSUCCESS>t},p.prototype.isTepSuccess=function(t){return t>=this.consts.tesSUCCESS},p.prototype.isTecClaimed=function(t){return t>=this.consts.tecCLAIMED},p.prototype.isRejected=function(t){return this.isTelLocal(t)||this.isTemMalformed(t)||this.isTefFailure(t)},p.prototype.set_state=function(t){this.state!==t&&(this.state=t,this.emit("state",t))},p.prototype.complete=function(){var t=this.tx_json;if(void 0===t.Fee&&this.remote.local_fee&&(t.Fee=p.fees["default"].to_json()),void 0===t.SigningPubKey&&(!this.remote||this.remote.local_signing)){var e=u.from_json(this._secret),i=e.get_key(this.tx_json.Account);t.SigningPubKey=i.to_hex_pub()}},p.prototype.serialize=function(){return h.from_json(this.tx_json)},p.prototype.signing_hash=function(){var t=f.testnet?p.HASH_SIGN_TESTNET:p.HASH_SIGN;return h.from_json(this.tx_json).signing_hash(t)},p.prototype.sign=function(){var t=u.from_json(this._secret),e=this.signing_hash(),i=t.get_key(this.tx_json.Account),r=i.sign(e,0),s=n.codec.hex.fromBits(r).toUpperCase();this.tx_json.TxnSignature=s},p.prototype.submit=function(t){var e=this,i=this.tx_json;if(this.callback=t,"string"!=typeof i.Account)return(this.callback||this.emit)("error",{error:"tejInvalidAccount",error_message:"Bad account."}),this;if(this.complete(),this.callback||this.listeners("final").length||this.listeners("lost").length||this.listeners("pending").length){this.submit_index=this.remote._ledger_current_index;var r=function(t){var i=t.ledger_hash,s=t.ledger_index;e.remote.request_transaction_entry(e.hash).ledger_hash(i).on("success",function(t){e.finalized||(e.set_state(t.metadata.TransactionResult),e.remote.removeListener("ledger_closed",r),e.emit("final",t),e.finalized=!0,e.callback&&e.callback(t.metadata.TransactionResult,t))}).on("error",function(t){e.finalized||"remoteError"===t.error&&"transactionNotFound"===t.remote.error&&(s>e.submit_index+l?(e.set_state("client_lost"),e.emit("lost"),e.callback&&e.callback("tejLost",t),e.remote.removeListener("ledger_closed",r),e.emit("final",t),e.finalized=!0):s>e.submit_index+_?(e.set_state("client_missing"),e.emit("pending")):e.emit("pending"))}).request()};this.remote.on("ledger_closed",r),this.callback&&this.on("error",function(t){e.callback(t.error,t)})}if(this.set_state("client_submitted"),e.remote.local_sequence&&!e.tx_json.Sequence){if(e.tx_json.Sequence=this.remote.account_seq(e.tx_json.Account,"ADVANCE"),!e.tx_json.Sequence)return this.remote.account_seq_cache(e.tx_json.Account,!1).on("success_account_seq_cache",function(){e.submit()}).on("error_account_seq_cache",function(){e.remote.account_seq_cache(e.tx_json.Account,"CURRENT").on("success_account_seq_cache",function(){e.submit()}).on("error_account_seq_cache",function(t){e.emit("error",t)}).request()}).request(),this;this.on("success",function(t){if(t&&"string"==typeof t.engine_result)switch(t.engine_result.slice(0,3)){case"tej":e.remote.account_seq(e.tx_json.Account,"REWIND");break;case"tel":case"tem":case"tef":e.remote.account_seq(e.tx_json.Account,"REWIND")}})}var s=this.remote.request_submit();if(s.on("success",function(t){e.emit("success",t)}),s.on("error",function(t){e.emit("error",t)}),!this._secret&&!this.tx_json.Signature)return this.emit("error",{result:"tejSecretUnknown",result_message:"Could not sign transactions because we."}),this;if(this.remote.local_signing)this.sign(),s.tx_blob(this.serialize().to_hex());else{if(!this.remote.trusted)return this.emit("error",{result:"tejServerUntrusted",result_message:"Attempt to give a secret to an untrusted server."}),this;s.secret(this._secret),s.build_path(this._build_path),s.tx_json(this.tx_json)}return s.request(),this},p.prototype.build_path=function(t){return this._build_path=t,this},p.prototype.destination_tag=function(t){return void 0!==t&&(this.tx_json.DestinationTag=t),this},p._path_rewrite=function(t){for(var e=[],i=0,r=t.length;r>i;i++){var s=t[i],n={};"account"in s&&(n.account=c.json_rewrite(s.account)),"issuer"in s&&(n.issuer=c.json_rewrite(s.issuer)),"currency"in s&&(n.currency=a.json_rewrite(s.currency)),e.push(n)}return e},p.prototype.path_add=function(t){return this.tx_json.Paths=this.tx_json.Paths||[],this.tx_json.Paths.push(p._path_rewrite(t)),this},p.prototype.paths=function(t){for(var e=0,i=t.length;i>e;e++)this.path_add(t[e]);return this},p.prototype.secret=function(t){this._secret=t},p.prototype.send_max=function(t){return t&&(this.tx_json.SendMax=o.json_rewrite(t)),this},p.prototype.source_tag=function(t){return void 0!==t&&(this.tx_json.SourceTag=t),this},p.prototype.transfer_rate=function(t){if(this.tx_json.TransferRate=Number(t),1e9>this.tx_json.TransferRate)throw"invalidTransferRate";return this},p.prototype.set_flags=function(t){if(t){var e=p.flags[this.tx_json.TransactionType];void 0==this.tx_json.Flags&&(this.tx_json.Flags=0);var i="object"==typeof t?t:[t];for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];s in e&&(this.tx_json.Flags+=e[s])}}return this},p.prototype._account_secret=function(t){return this.remote.secrets[t]},p.prototype.account_set=function(t){return this._secret=this._account_secret(t),this.tx_json.TransactionType="AccountSet",this.tx_json.Account=c.json_rewrite(t),this},p.prototype.claim=function(t,e,i,r){return this._secret=this._account_secret(t),this.tx_json.TransactionType="Claim",this.tx_json.Generator=e,this.tx_json.PublicKey=i,this.tx_json.Signature=r,this},p.prototype.offer_cancel=function(t,e){return this._secret=this._account_secret(t),this.tx_json.TransactionType="OfferCancel",this.tx_json.Account=c.json_rewrite(t),this.tx_json.OfferSequence=Number(e),this},p.prototype.offer_create=function(t,e,i,r){return this._secret=this._account_secret(t),this.tx_json.TransactionType="OfferCreate",this.tx_json.Account=c.json_rewrite(t),this.tx_json.TakerPays=o.json_rewrite(e),this.tx_json.TakerGets=o.json_rewrite(i),this.remote.local_fee&&(this.tx_json.Fee=p.fees.offer.to_json()),r&&(this.tx_json.Expiration=Date===r.constructor?r.getTime():Number(r)),this},p.prototype.password_fund=function(t,e){return this._secret=this._account_secret(t),this.tx_json.TransactionType="PasswordFund",this.tx_json.Destination=c.json_rewrite(e),this},p.prototype.password_set=function(t,e,i,r,s){return this._secret=this._account_secret(t),this.tx_json.TransactionType="PasswordSet",this.tx_json.RegularKey=e,this.tx_json.Generator=i,this.tx_json.PublicKey=r,this.tx_json.Signature=s,this},p.prototype.payment=function(t,e,i){return this._secret=this._account_secret(t),this.tx_json.TransactionType="Payment",this.tx_json.Account=c.json_rewrite(t),this.tx_json.Amount=o.json_rewrite(i),this.tx_json.Destination=c.json_rewrite(e),this},p.prototype.ripple_line_set=function(t,e,i,r){return this._secret=this._account_secret(t),this.tx_json.TransactionType="TrustSet",this.tx_json.Account=c.json_rewrite(t),void 0!==e&&(this.tx_json.LimitAmount=o.json_rewrite(e)),i&&(this.tx_json.QualityIn=i),r&&(this.tx_json.QualityOut=r),this},p.prototype.wallet_add=function(t,e,i,r,s){return this._secret=this._account_secret(t),this.tx_json.TransactionType="WalletAdd",this.tx_json.Amount=o.json_rewrite(e),this.tx_json.RegularKey=i,this.tx_json.PublicKey=r,this.tx_json.Signature=s,this},e.Transaction=p},20:function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},21:function(t){t.exports=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;t.length>i;i++)if(e===t[i])return i;return-1}},22:function(t){t.exports=function(t){return t instanceof RegExp||"object"==typeof t&&"[object RegExp]"===Object.prototype.toString.call(t)}},23:function(t){t.exports=Object.create||function(t,e){var i;if(null===t)i={__proto__:null};else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var r=function(){};r.prototype=t,i=new r,i.__proto__=t}return e!==void 0&&Object.defineProperties&&Object.defineProperties(i,e),i}},24:function(t){t.exports=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.hasOwnProperty.call(t,i)&&e.push(i);return e}},25:function(t){t.exports=Object.keys||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},26:function(t,e,i){var r=i(5).EventEmitter,s=i(8);i(2).Amount;var n=i(9).UInt160,o=i(4),a=function(t,e){r.call(this);var i=this;return this._remote=t,this._account=n.from_json(e),this._account_id=this._account.to_json(),this._subs=0,this._entry={},this.on("newListener",function(t){-1!==a.subscribe_events.indexOf(t)&&(i._subs||"open"!==i._remote._online_state||i._remote.request_subscribe().accounts(i._account_id).request(),i._subs+=1)}),this.on("removeListener",function(t){-1!==a.subscribe_events.indexOf(t)&&(i._subs-=1,i._subs||"open"!==i._remote._online_state||i._remote.request_unsubscribe().accounts(i._account_id).request())}),this._remote.on("prepare_subscribe",function(t){i._subs&&t.accounts(i._account_id)}),this.on("transaction",function(t){var e=!1;t.mmeta.each(function(t){"AccountRoot"===t.entryType&&t.fields.Account===i._account_id&&(o(i._entry,t.fieldsNew,t.fieldsFinal),e=!0)}),e&&i.emit("entry",i._entry)}),this};s.inherits(a,r),a.subscribe_events=["transaction","entry"],a.prototype.to_json=function(){return this._account.to_json()},a.prototype.is_valid=function(){return this._account.is_valid()},a.prototype.entry=function(t){var e=this;return e._remote.request_account_info(this._account_id).on("success",function(i){o(e._entry,i.account_data),e.emit("entry",e._entry),"function"==typeof t&&t(null,i)}).on("error",function(e){t(e)}).request(),this},a.prototype.notifyTx=function(t){this._subs&&this.emit("transaction",t)},e.Account=a},27:function(t,e,i){var r=i(1),s=i(13).UInt256,n=function(){this._curve=r.ecc.curves.c256,this._secret=null,this._pubkey=null};n.from_bn_secret=function(t){return t instanceof this?t.clone():(new this).parse_bn_secret(t)},n.prototype.parse_bn_secret=function(t){return this._secret=new r.ecc.ecdsa.secretKey(r.ecc.curves.c256,t),this},n.prototype._pub=function(){var t=this._curve;if(!this._pubkey&&this._secret){var e=this._secret._exponent;this._pubkey=new r.ecc.ecdsa.publicKey(t,t.G.mult(e))}return this._pubkey},n.prototype.to_hex_pub=function(){var t=this._pub();if(!t)return null;var e=t._point,i=e.y.mod(2).equals(0);return r.codec.hex.fromBits(r.bitArray.concat([r.bitArray.partial(8,i?2:3)],e.x.toBits(this._curve.r.bitLength()))).toUpperCase()},n.prototype.sign=function(t){return t=s.from_json(t),this._secret.signDER(t.to_bits(),0)},e.KeyPair=n},28:function(t,e,i){var r=i(5).EventEmitter,s=i(8),n=i(2).Amount,o=i(9).UInt160,a=i(11).Currency,c=i(4),u=function(t,e,i,s,n){r.call(this);var o=this;return this._remote=t,this._currency_gets=e,this._issuer_gets=i,this._currency_pays=s,this._issuer_pays=n,this._subs=0,this._sync=!1,this._offers=[],this.on("newListener",function(t){-1!==u.subscribe_events.indexOf(t)&&(o._subs||"open"!==o._remote._online_state||o._subscribe(),o._subs+=1)}),this.on("removeListener",function(t){-1!==u.subscribe_events.indexOf(t)&&(o._subs-=1,o._subs||"open"!==o._remote._online_state||(o._sync=!1,o._remote.request_unsubscribe().books([o.to_json()]).request()))}),this._remote.on("connect",function(){o._subs&&o._subscribe()}),this._remote.on("disconnect",function(){o._sync=!1}),this};s.inherits(u,r),u.subscribe_events=["transaction","model","trade"],u.prototype._subscribe=function(){var t=this;t._remote.request_subscribe().books([t.to_json()],!0).on("error",function(){}).on("success",function(e){t._sync=!0,t._offers=e.offers,t.emit("model",t._offers)}).request()},u.prototype.to_json=function(){var t={taker_gets:{currency:this._currency_gets},taker_pays:{currency:this._currency_pays}};return"XRP"!==this._currency_gets&&(t.taker_gets.issuer=this._issuer_gets),"XRP"!==this._currency_pays&&(t.taker_pays.issuer=this._issuer_pays),t},u.prototype.is_valid=function(){return a.is_valid(this._currency_pays)&&("XRP"===this._currency_pays||o.is_valid(this._issuer_pays))&&a.is_valid(this._currency_gets)&&("XRP"===this._currency_gets||o.is_valid(this._issuer_gets))&&!("XRP"===this._currency_pays&&"XRP"===this._currency_gets)},u.prototype.notifyTx=function(t){var e=this,i=!1,r=n.from_json("0"+("XRP"===this._currency_gets?"":"/"+this._currency_gets+"/"+this._issuer_gets)),s=n.from_json("0"+("XRP"===this._currency_pays?"":"/"+this._currency_pays+"/"+this._issuer_pays));t.mmeta.each(function(o){if("Offer"===o.entryType){var a,u,h;if("DeletedNode"===o.diffType||"ModifiedNode"===o.diffType){for(a=0,u=e._offers.length;u>a;a++)if(h=e._offers[a],h.index===o.ledgerIndex){"DeletedNode"===o.diffType?e._offers.splice(a,1):c(h,o.fieldsFinal),i=!0;break}if("OfferCancel"===t.transaction.TransactionType)return;r=r.add(o.fieldsPrev.TakerGets),s=s.add(o.fieldsPrev.TakerPays),"ModifiedNode"===o.diffType&&(r=r.subtract(o.fieldsFinal.TakerGets),s=s.subtract(o.fieldsFinal.TakerPays))}else if("CreatedNode"===o.diffType){var f=n.from_json(o.fields.TakerPays).ratio_human(o.fields.TakerGets);for(a=0,u=e._offers.length;u>a;a++){h=e._offers[a];var _=n.from_json(h.TakerPays).ratio_human(h.TakerGets);if(0>=f.compareTo(_)){var l=o.fields;l.index=o.ledgerIndex,e._offers.splice(a,0,o.fields),i=!0;break}}}}}),this._subs&&(this.emit("transaction",t),i&&this.emit("model",this._offers),r.is_zero()||this.emit("trade",s,r))},u.prototype.offers=function(t){return"function"==typeof t&&(this._sync?t(this._offers):this.once("model",function(e){t(e)})),this},u.prototype.offersSync=function(){return this._offers},e.OrderBook=u},29:function(t,e,i){var r=i(5).EventEmitter,s=i(8),n=i(31).Server,o=i(2).Amount,a=i(11).Currency,c=i(9).UInt160,u=i(19).Transaction,h=i(26).Account,f=i(16).Meta,_=i(28).OrderBook,l=i(3),p=i(6),d=i(1),m=function(t,e){r.call(this),this.message={command:e,id:void 0},this.remote=t,this.requested=!1};s.inherits(m,r),m.prototype.request=function(t){this.requested||(this.requested=!0,this.remote.request(this),this.emit("request",t))},m.prototype.build_path=function(t){return t&&(this.message.build_path=!0),this},m.prototype.ledger_choose=function(t){return t?this.message.ledger_index=this.remote._ledger_current_index:this.message.ledger_hash=this.remote._ledger_hash,this},m.prototype.ledger_hash=function(t){return this.message.ledger_hash=t,this},m.prototype.ledger_index=function(t){return this.message.ledger_index=t,this},m.prototype.ledger_select=function(t){return"current"===t?this.message.ledger_index=t:"closed"===t?this.message.ledger_index=t:"verified"===t?this.message.ledger_index=t:(t+"").length>12?this.message.ledger_hash=t:this.message.ledger_index=t,this},m.prototype.account_root=function(t){return this.message.account_root=c.json_rewrite(t),this},m.prototype.index=function(t){return this.message.index=t,this},m.prototype.offer_id=function(t,e){return this.message.offer={account:c.json_rewrite(t),seq:e},this},m.prototype.offer_index=function(t){return this.message.offer=t,this},m.prototype.secret=function(t){return t&&(this.message.secret=t),this},m.prototype.tx_hash=function(t){return this.message.tx_hash=t,this},m.prototype.tx_json=function(t){return this.message.tx_json=t,this},m.prototype.tx_blob=function(t){return this.message.tx_blob=t,this},m.prototype.ripple_state=function(t,e,i){return this.message.ripple_state={accounts:[c.json_rewrite(t),c.json_rewrite(e)],currency:i},this},m.prototype.accounts=function(t,e){"object"!=typeof t&&(t=[t]);for(var i=[],r=0,s=t.length;s>r;r++)i.push(c.json_rewrite(t[r]));return e?this.message.rt_accounts=i:this.message.accounts=i,this},m.prototype.rt_accounts=function(t){return this.accounts(t,!0)},m.prototype.books=function(t,e){function i(t){if(!o[t])throw Error("Missing "+t);var e={};e.currency=a.json_rewrite(o[t].currency),"XRP"!==e.currency&&(e.issuer=c.json_rewrite(o[t].issuer)),u[t]=e}for(var r=[],s=0,n=t.length;n>s;s++){var o=t[s],u={};i("taker_gets"),i("taker_pays"),(e||o.snapshot)&&(u.snapshot=!0),o.both&&(u.both=!0),r.push(u)}return this.message.books=r,this};var v=function(t,e){r.call(this);var i=this;this.trusted=t.trusted,this.websocket_ip=t.websocket_ip,this.websocket_port=t.websocket_port,this.websocket_ssl=t.websocket_ssl,this.local_sequence=t.local_sequence,this.local_fee=t.local_fee,this.local_signing=t.local_signing===void 0?!0:t.local_signing,this.id=0,this.trace=t.trace||e,this._server_fatal=!1,this._ledger_current_index=void 0,this._ledger_hash=void 0,this._ledger_time=void 0,this._stand_alone=void 0,this._testnet=void 0,this._transaction_subs=0,this.online_target=!1,this._online_state="closed",this.state="offline",this.retry_timer=void 0,this.retry=void 0,this._load_base=256,this._load_factor=1,this._fee_ref=void 0,this._fee_base=void 0,this._reserve_base=void 0,this._reserve_inc=void 0,this._connection_count=0,this._last_tx=null,this.local_signing&&(this.local_sequence=!0,this.local_fee=!0),this._servers=[],this.accounts={},this._accounts={},this._books={},this.secrets={},this.ledgers={current:{account_root:{}}};var s=(this.websocket_ssl?"wss://":"ws://")+this.websocket_ip+":"+this.websocket_port,o=new n(this,{url:s});"maxListeners"in t&&(o.setMaxListeners(t.maxListeners),this.setMaxListeners(t.maxListeners)),this.add_server(o),this.on("newListener",function(t){"transaction_all"===t&&(i._transaction_subs||"open"!==i._online_state||i.request_subscribe(["transactions"]).request(),i._transaction_subs+=1)}),this.on("removeListener",function(t){"transaction_all"===t&&(i._transaction_subs-=1,i._transaction_subs||"open"!==i._online_state||i.request_unsubscribe(["transactions"]).request())})};s.inherits(v,r),v.flags={account_root:{PasswordSpent:65536,RequireDestTag:131072,RequireAuth:262144,DisallowXRP:524288}},v.from_config=function(t,e){var i="string"==typeof t?p.servers[t]:t,r=new v(i,e);for(var s in p.accounts){var n=p.accounts[s];"object"==typeof n&&n.secret&&(r.set_secret(s,n.secret),r.set_secret(n.account,n.secret))}return r},v.prototype.add_server=function(t){var e=this;return t.on("message",function(t){e._handle_message(t)}),t.on("connect",function(){e._connection_count++,e._set_state("online")}),t.on("disconnect",function(){e._connection_count--,e._connection_count||e._set_state("offline")}),this._servers.push(t),this},v.prototype.server_fatal=function(){this._server_fatal=!0},v.prototype._set_state=function(t){if(this.trace&&console.log("remote: set_state: %s",t),this.state!==t)switch(this.state=t,this.emit("state",t),t){case"online":this._online_state="open",this.emit("connect"),this.emit("connected");break;case"offline":this._online_state="closed",this.emit("disconnect"),this.emit("disconnected")}},v.prototype.set_trace=function(t){return this.trace=void 0===t||t,this},v.prototype.connect=function(t){if(t!==void 0&&!t)return this.disconnect();if(!this._servers.length)throw Error("No servers available.");return this._servers[0].connect(),this},v.prototype.disconnect=function(){for(var t=0,e=this._servers.length;e>t;t++)this._servers[t].disconnect();return this._set_state("offline"),this},v.prototype.ledger_hash=function(){return this._ledger_hash},v.prototype._handle_message=function(t){var e,i=this,r=JSON.parse(t),s=!1;if("object"!=typeof r)s=!0;else switch(r.type){case"response":break;case"ledgerClosed":this._ledger_time=r.ledger_time,this._ledger_hash=r.ledger_hash,this._ledger_current_index=r.ledger_index+1,this.emit("ledger_closed",r);break;case"transaction":if(this._last_tx===r.transaction.hash)break;this._last_tx=r.transaction.hash,this.trace&&l.logObject("remote: tx: %s",r),r.mmeta=new f(r.meta);for(var n=r.mmeta.getAffectedAccounts(),o=0,a=n.length;a>o;o++){var c=i._accounts[n[o]];c&&c.notifyTx(r)}for(n=r.mmeta.getAffectedBooks(),o=0,a=n.length;a>o;o++){var u=i._books[n[o]];u&&u.notifyTx(r)}this.emit("transaction",r),this.emit("transaction_all",r);break;case"serverStatus":"load_base"in r&&"load_factor"in r&&(r.load_base!==i._load_base||r.load_factor!=i._load_factor)&&(i._load_base=r.load_base,i._load_factor=r.load_factor,i.emit("load",{load_base:i._load_base,load_factor:i.load_factor}));break;default:this.trace&&l.logObject("remote: "+r.type+": %s",r),this.emit("net_"+r.type,r)}s&&(console.log("unexpected message from trusted remote: %s",t),(e||this).emit("error",{error:"remoteUnexpected",error_message:"Unexpected response from remote."}))},v.prototype.request=function(t){if(!this._servers.length)throw Error("No servers available.");this._servers[0].request(t)},v.prototype.request_server_info=function(){return new m(this,"server_info")},v.prototype.request_ledger=function(t,e){var i=new m(this,"ledger");return t&&(console.log("request_ledger: ledger parameter is deprecated"),i.message.ledger=t),"object"==typeof e?(e.full&&(i.message.full=!0),e.expand&&(i.message.expand=!0),e.transactions&&(i.message.transactions=!0),e.accounts&&(i.message.accounts=!0)):e&&(console.log("request_ledger: full parameter is deprecated"),i.message.full=!0),i},v.prototype.request_ledger_hash=function(){return new m(this,"ledger_closed")},v.prototype.request_ledger_header=function(){return new m(this,"ledger_header")},v.prototype.request_ledger_current=function(){return new m(this,"ledger_current")},v.prototype.request_ledger_entry=function(t){var e=this,i=new m(this,"ledger_entry");return"account_root"===t&&(i.request_default=i.request,i.request=function(){var r=!0;if(e._ledger_hash);else if("account_root"===t){var s=e.ledgers.current.account_root;s||(s=e.ledgers.current.account_root={});var n=e.ledgers.current.account_root[i.message.account_root];if(n)i.emit("success",{node:n}),r=!1;else switch(t){case"account_root":i.on("success",function(t){e.ledgers.current.account_root[t.node.Account]=t.node});break;default:}}r&&i.request_default()}),i},v.prototype.request_subscribe=function(t){var e=new m(this,"subscribe");return t&&("object"!=typeof t&&(t=[t]),e.message.streams=t),e},v.prototype.request_unsubscribe=function(t){var e=new m(this,"unsubscribe");return t&&("object"!=typeof t&&(t=[t]),e.message.streams=t),e},v.prototype.request_transaction_entry=function(t){return new m(this,"transaction_entry").tx_hash(t)},v.prototype.request_tx=function(t){var e=new m(this,"tx");return e.message.transaction=t,e},v.prototype.request_account_info=function(t){var e=new m(this,"account_info");return e.message.ident=c.json_rewrite(t),e.message.account=c.json_rewrite(t),e},v.prototype.request_account_lines=function(t,e,i){var r=new m(this,"account_lines");return r.message.account=c.json_rewrite(t),e&&(r.message.index=e),r.ledger_choose(i)},v.prototype.request_account_offers=function(t,e,i){var r=new m(this,"account_offers");return r.message.account=c.json_rewrite(t),e&&(r.message.index=e),r.ledger_choose(i)},v.prototype.request_account_tx=function(t){var e=new m(this,"account_tx");return e.message.account=t.account,t.ledger_index_min!==void 0&&(e.message.ledger_index_min=t.ledger_index_min),t.ledger_index_max!==void 0&&(e.message.ledger_index_max=t.ledger_index_max),t.binary!==void 0&&(e.message.binary=t.binary),t.count!==void 0&&(e.message.count=t.count),t.descending!==void 0&&(e.message.descending=t.descending),t.offset!==void 0&&(e.message.offset=t.offset),t.limit!==void 0&&(e.message.limit=t.limit),e},v.prototype.request_book_offers=function(t,e,i){var r=new m(this,"book_offers");return r.message.taker_gets={currency:a.json_rewrite(t.currency)},"XRP"!==r.message.taker_gets.currency&&(r.message.taker_gets.issuer=c.json_rewrite(t.issuer)),r.message.taker_pays={currency:a.json_rewrite(e.currency)},"XRP"!==r.message.taker_pays.currency&&(r.message.taker_pays.issuer=c.json_rewrite(e.issuer)),r.message.taker=i?i:c.ACCOUNT_ONE,r},v.prototype.request_wallet_accounts=function(t){l.assert(this.trusted);var e=new m(this,"wallet_accounts");return e.message.seed=t,e},v.prototype.request_sign=function(t,e){l.assert(this.trusted);var i=new m(this,"sign");return i.message.secret=t,i.message.tx_json=e,i},v.prototype.request_submit=function(){var t=new m(this,"submit");return t},v.prototype._server_prepare_subscribe=function(){var t=this,e=["ledger","server"];this._transaction_subs&&e.push("transactions");var i=this.request_subscribe(e);return i.on("success",function(e){if(t._stand_alone=!!e.stand_alone,t._testnet=!!e.testnet,"string"==typeof e.random){for(var i=e.random.match(/[0-9A-F]{8}/gi);i&&i.length;)d.random.addEntropy(parseInt(i.pop(),16));t.emit("random",l.hexToArray(e.random))}e.ledger_hash&&e.ledger_index&&(t._ledger_time=e.ledger_time,t._ledger_hash=e.ledger_hash,t._ledger_current_index=e.ledger_index+1,t.emit("ledger_closed",e)),t._load_base=e.load_base||256,t._load_factor=e.load_factor||1,t._fee_ref=e.fee_ref,t._fee_base=e.fee_base,t._reserve_base=e.reserve_base,t._reserve_inc=e.reserve_inc,t.emit("subscribed")}),t.emit("prepare_subscribe",i),i},v.prototype.ledger_accept=function(){if(this._stand_alone||void 0===this._stand_alone){var t=new m(this,"ledger_accept");t.request()}else this.emit("error",{error:"notStandAlone"});return this},v.prototype.request_account_balance=function(t,e){var i=this.request_ledger_entry("account_root");return i.account_root(t).ledger_choose(e).on("success",function(t){i.emit("account_balance",o.from_json(t.node.Balance))})},v.prototype.request_account_flags=function(t,e){var i=this.request_ledger_entry("account_root");return i.account_root(t).ledger_choose(e).on("success",function(t){i.emit("account_flags",t.node.Flags)})},v.prototype.request_owner_count=function(t,e){var i=this.request_ledger_entry("account_root");return i.account_root(t).ledger_choose(e).on("success",function(t){i.emit("owner_count",t.node.OwnerCount)})},v.prototype.account=function(t){if(t=c.json_rewrite(t),!this._accounts[t]){var e=new h(this,t);if(!e.is_valid())return e;this._accounts[t]=e}return this._accounts[t]},v.prototype.book=function(t,e,i,r){var s=t;"XRP"!==s&&(s+="/"+e);var n=i;"XRP"!==n&&(n+="/"+r);var o=s+":"+n;if(!this._books[o]){var a=new _(this,t,e,i,r);if(!a.is_valid())return a;this._books[o]=a}return this._books[o]},v.prototype.account_seq=function(t,e){t=c.json_rewrite(t);var i,r=this.accounts[t];return r&&r.seq&&(i=r.seq,"ADVANCE"===e&&(r.seq+=1),"REWIND"===e&&(r.seq-=1)),i},v.prototype.set_account_seq=function(t,e){var t=c.json_rewrite(t);this.accounts[t]||(this.accounts[t]={}),this.accounts[t].seq=e},v.prototype.account_seq_cache=function(t,e){var i,r=this;r.accounts[t]||(r.accounts[t]={});var s=r.accounts[t];return i=s.caching_seq_request,i||(i=r.request_ledger_entry("account_root").account_root(t).ledger_choose(e).on("success",function(t){delete s.caching_seq_request;var e=t.node.Sequence;s.seq=e,i.emit("success_account_seq_cache",t)}).on("error",function(t){delete s.caching_seq_request,i.emit("error_account_seq_cache",t)}),s.caching_seq_request=i),i},v.prototype.dirty_account_root=function(t){var t=c.json_rewrite(t);delete this.ledgers.current.account_root[t]
},v.prototype.set_secret=function(t,e){this.secrets[t]=e},v.prototype.request_ripple_balance=function(t,e,i,r){var s=this.request_ledger_entry("ripple_state");return s.ripple_state(t,e,i).ledger_choose(r).on("success",function(i){var r=i.node,n=o.from_json(r.LowLimit),a=o.from_json(r.HighLimit),u=o.from_json(r.Balance),h=c.from_json(t).equals(a.issuer());s.emit("ripple_state",{account_balance:(h?u.negate():u.clone()).parse_issuer(t),peer_balance:(h?u.clone():u.negate()).parse_issuer(e),account_limit:(h?a:n).clone().parse_issuer(e),peer_limit:(h?n:a).clone().parse_issuer(t),account_quality_in:h?r.HighQualityIn:r.LowQualityIn,peer_quality_in:h?r.LowQualityIn:r.HighQualityIn,account_quality_out:h?r.HighQualityOut:r.LowQualityOut,peer_quality_out:h?r.LowQualityOut:r.HighQualityOut})})},v.prototype.request_ripple_path_find=function(t,e,i,r){var s=new m(this,"ripple_path_find");return s.message.source_account=c.json_rewrite(t),s.message.destination_account=c.json_rewrite(e),s.message.destination_amount=o.json_rewrite(i),r&&(s.message.source_currencies=r.map(function(t){var e={};return"issuer"in t&&(e.issuer=c.json_rewrite(t.issuer)),"currency"in t&&(e.currency=a.json_rewrite(t.currency)),e})),s},v.prototype.request_unl_list=function(){return new m(this,"unl_list")},v.prototype.request_unl_add=function(t,e){var i=new m(this,"unl_add");return i.message.node=t,void 0!==e&&(i.message.comment=note),i},v.prototype.request_unl_delete=function(t){var e=new m(this,"unl_delete");return e.message.node=t,e},v.prototype.request_peers=function(){return new m(this,"peers")},v.prototype.request_connect=function(t,e){var i=new m(this,"connect");return i.message.ip=t,e&&(i.message.port=e),i},v.prototype.transaction=function(){return new u(this)},e.Remote=v},30:function(t,e,i){function r(t,e){return t[3].id!==e[3].id?t[3].id-e[3].id:t[2]-e[2]}var s=i(15),n=i(1),o=i(4),a=i(18),c=i(13).UInt256,u=function(){this.buffer=[],this.pointer=0};u.from_json=function(t){var e,i=new u;if(t=o({},t),"number"==typeof t.TransactionType&&(t.TransactionType=u.lookup_type_tx(t.TransactionType),!t.TransactionType))throw Error("Transaction type ID is invalid.");if("string"!=typeof t.TransactionType)throw t.LedgerEntryType!==void 0?Error("Ledger entry binary format not yet implemented."):Error("Object to be serialized must contain either TransactionType or LedgerEntryType.");return e=s.tx[t.TransactionType].slice(),t.TransactionType=e.shift(),i.serialize(e,t),i},u.prototype.append=function(t){this.buffer=this.buffer.concat(t),this.pointer+=t.length},u.prototype.to_bits=function(){return n.codec.bytes.toBits(this.buffer)},u.prototype.to_hex=function(){return n.codec.hex.fromBits(this.to_bits()).toUpperCase()},u.prototype.serialize=function(t,e){t=u._sort_typedef(t.slice());for(var i=0,r=t.length;r>i;i++){var s=t[i];this.serialize_field(s,e)}},u.prototype.signing_hash=function(t){var e=new u;return a.Int32.serialize(e,t),e.append(this.buffer),e.hash_sha512_half()},u.prototype.hash_sha512_half=function(){var t=n.codec.bytes.toBits(this.buffer),e=n.bitArray.bitSlice(n.hash.sha512.hash(t),0,256);return c.from_hex(n.codec.hex.fromBits(e))},u.prototype.serialize_field=function(t,e){t=t.slice();var i=t.shift(),r=t.shift(),n=t.shift(),o=t.shift();if(e[i]!==void 0){this.append(u.get_field_header(o.id,n));try{o.serialize(this,e[i])}catch(a){throw a.message="Error serializing '"+i+"': "+a.message,a}}else if(r===s.REQUIRED)throw Error("Missing required field "+i)},u.get_field_header=function(t,e){var i=[0];return t>15?i.push(255&t):i[0]+=(15&t)<<4,e>15?i.push(255&e):i[0]+=15&e,i},u._sort_typedef=function(t){return t.sort(r)},u.lookup_type_tx=function(t){for(var e in s.tx)if(s.tx.hasOwnProperty(e)&&s.tx[e][0]===t)return e;return null},e.SerializedObject=u},31:function(t,e,i){var r=i(5).EventEmitter,s=i(8),n=i(3),o=function(t,e){if(r.call(this),"object"!=typeof e||"string"!=typeof e.url)throw Error("Invalid server configuration.");this._remote=t,this._cfg=e,this._ws=null,this._connected=!1,this._should_connect=!1,this._state=null,this._id=0,this._retry=0,this._requests={},this.on("message",this._handle_message.bind(this)),this.on("response_subscribe",this._handle_response_subscribe.bind(this))};s.inherits(o,r),o.online_states=["syncing","tracking","proposing","validating","full"],o.prototype.connect=function(){function t(){e.emit("socket_close"),e._set_state("offline"),s.onopen=s.onerror=s.onclose=s.onmessage=function(){},e._should_connect&&(e._retry+=1,e._retry_timer=setTimeout(function(){e._remote.trace&&console.log("server: retry"),e._should_connect&&e.connect()},40>e._retry?50:100>e._retry?1e3:160>e._retry?1e4:3e4))}var e=this;if(this._connected!==!0){this._remote.trace&&console.log("server: connect: %s",this._cfg.url),this._ws&&this._ws.close();var r=i(33),s=this._ws=new r(this._cfg.url);this._should_connect=!0,e.emit("connecting"),s.onopen=function(){if(s===e._ws){e.emit("socket_open");var t=e._remote._server_prepare_subscribe();e.request(t)}},s.onerror=function(i){s===e._ws&&(e._remote.trace&&console.log("server: onerror: %s",i.data||i),t())},s.onclose=function(){s===e._ws&&(e._remote.trace&&console.log("server: onclose: %s",s.readyState),t())},s.onmessage=function(t){e.emit("message",t.data)}}},o.prototype.disconnect=function(){this._should_connect=!1,this._set_state("offline"),this.ws&&this.ws.close()},o.prototype.request=function(t){var e=this;e._ws?(t.message.id=e._id,e._requests[t.message.id]=t,e._id++,"online"===e._state||"subscribe"===t.message.command&&1===e._ws.readyState?(e._remote.trace&&n.logObject("server: request: %s",t.message),e._ws.send(JSON.stringify(t.message))):e.once("connect",function(){e._remote.trace&&n.logObject("server: request: %s",t.message),e._ws.send(JSON.stringify(t.message))})):e._remote.trace&&n.logObject("server: request: DROPPING: %s",t.message)},o.prototype._set_state=function(t){t!==this._state&&(this._state=t,this.emit("state",t),"online"===t?this.emit("connect"):"offline"===t&&this.emit("disconnect"))},o.prototype._handle_message=function(t){var e=this,i=JSON.parse(t);if("response"===i.type){var r=e._requests[i.id];delete e._requests[i.id],r?"success"===i.status?(e._remote.trace&&n.logObject("server: response: %s",i),r.emit("success",i.result),e.emit("response_"+r.message.command,i.result,r,i),e._remote.emit("response_"+r.message.command,i.result,r,i)):i.error&&(e._remote.trace&&n.logObject("server: error: %s",i),r.emit("error",{error:"remoteError",error_message:"Remote reported an error.",remote:i})):e._remote.trace&&n.logObject("server: UNEXPECTED: %s",i)}else"serverStatus"===i.type&&e._set_state(-1!==o.online_states.indexOf(i.server_status)?"online":"offline")},o.prototype._handle_response_subscribe=function(t){var e=this;e._server_status=t.server_status,-1!==o.online_states.indexOf(t.server_status)&&e._set_state("online")},e.Server=o},32:function(t,e){Function.prototype.method=function(t,e){return this.prototype[t]=e,this};var i=function(t,e){return function(){console.log("%s: %s",i,arguments.toString),e(arguments)}},r=function(t,e){var i,r=Array(t);for(i=0;t>i;i++)r[i]=e;return r},s=function(t){var e=[],i=0;for(t.length%2&&(e.push(String.fromCharCode(parseInt(t.substring(0,1),16))),i=1);i!=t.length;i+=2)e.push(String.fromCharCode(parseInt(t.substring(i,i+2),16)));return e.join("")},n=function(t){return Array.prototype.map.call(t,function(t){var e=t.charCodeAt(0);return 16>e?"0"+e.toString(16):e.toString(16)}).join("")},o=function(t){var e,i=Array(t.length);for(e=0;e!=i.length;e+=1)i[e]=t.charCodeAt(e);return i},a=function(t){return o(s(t))},c=function(t,e,i){var r=[],s=0,n=t.length;for(i&&(s=t.length%e,s&&r.push(t.slice(0,s)));n>s;s+=e)r.push(t.slice(s,e+s));return r},u=function(t,e){console.log(t,JSON.stringify(e,void 0,2))},h=function(t,e){if(!t)throw Error("Assertion failed"+(e?": "+e:"."))},f=function(t){for(var e={},i=[],r=0,s=t.length;s>r;++r)e.hasOwnProperty(t[r])||(i.push(t[r]),e[t[r]]=1);return i},_=function(t){return 1e3*(t+946684800)};e.trace=i,e.arraySet=r,e.hexToString=s,e.hexToArray=a,e.stringToArray=o,e.stringToHex=n,e.chunkString=c,e.logObject=u,e.assert=h,e.arrayUnique=f,e.toTimestamp=_},33:function(t){t.exports=WebSocket}});